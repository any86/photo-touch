(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Merge"],{"1e8b":function(e,t,n){"use strict";n("bd0c")},"21a6":function(e,t,n){(function(n){var o,r,a;(function(n,i){r=[],o=i,a="function"===typeof o?o.apply(t,r):o,void 0===a||(e.exports=a)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){c(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var c=i.URL||i.webkitURL,u=document.createElement("a");t=t||e.name||"download",u.download=t,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?a(u):r(u.href)?o(e,t,n):a(u,u.target="_blank")):(u.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(u.href)}),4e4),setTimeout((function(){a(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),n);else if(r(e))o(e,n,i);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){a(c)}))}}:function(e,t,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,n);var a="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&c)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var e=s.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},s.readAsDataURL(e)}else{var l=i.URL||i.webkitURL,d=l.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout((function(){l.revokeObjectURL(d)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c}))}).call(this,n("c8ba"))},4863:function(e,t,n){"use strict";n.r(t);var o=n("5c40"),r={class:"page-merge"},a={class:"page-merge__left"},i={class:"page-merge__left__content"},c=Object(o["j"])("i",{class:"ion-md-image"},null,-1),u=Object(o["i"])(" 保存 "),s={class:"page-merge__middle"},l=Object(o["j"])("i",{class:"ion-md-folder-open"},null,-1),d=Object(o["i"])(" 打开 "),f=Object(o["j"])("div",{class:"page-merge__right"},null,-1);function b(e,t){var n=Object(o["w"])("ButtonLoadFile");return Object(o["s"])(),Object(o["e"])("article",r,[Object(o["j"])("div",a,[Object(o["j"])("div",i,[Object(o["j"])("canvas",{ref:"canvas",width:e.width,height:e.height},null,8,["width","height"]),Object(o["j"])("ul",null,[(Object(o["s"])(!0),Object(o["e"])(o["b"],null,Object(o["u"])(e.backgroundURLs,(function(t){return Object(o["s"])(),Object(o["e"])("li",{key:t},[Object(o["j"])("img",{src:t,onClick:function(n){return e.changeBackground(t)}},null,8,["src","onClick"])])})),128))]),Object(o["j"])("button",{class:"a-button a-button--success a-button-save",onClick:t[1]||(t[1]=function(){return e.save.apply(e,arguments)})},[c,u])])]),Object(o["j"])("div",s,[Object(o["j"])("ul",null,[(Object(o["s"])(!0),Object(o["e"])(o["b"],null,Object(o["u"])(e.imagesUploaded,(function(e){var t=e.src;return Object(o["s"])(),Object(o["e"])("li",{class:"img",key:t},[Object(o["j"])("img",{src:t},null,8,["src"])])})),128)),Object(o["j"])("li",null,[Object(o["j"])(n,{onLoaded:e.onImageLoaded,class:"button-add p-0 a-button a-button--dark a-button--outline"},{default:Object(o["C"])((function(){return[l,d]})),_:1},8,["onLoaded"])])])]),f])}n("d3b7"),n("ddb0");function h(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d28b"),n("3ca3");function g(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(o=(i=c.next()).done);o=!0)if(n.push(i.value),t&&n.length===t)break}catch(u){r=!0,a=u}finally{try{o||null==c["return"]||c["return"]()}finally{if(r)throw a}}return n}}var m=n("06c5");function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){return h(e)||g(e,t)||Object(m["a"])(e,t)||p()}function w(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(m["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(c)throw a}}}}n("96cf");var j=n("1da1"),y=n("21a6"),O=(n("25f0"),{});function k(e){return"[object HTMLImageElement]"===Object.prototype.toString.call(e)}function x(e){return new Promise((function(t,n){if(k(e))t(e);else if(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(e)){var o=document.createElement("canvas");o.width=1,o.height=1;var r=o.getContext("2d");r.fillStyle=e,r.fillRect(0,0,1,1),x(o.toDataURL()).then(t)}else{if(O[e])return void t(O[e]);var a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){O[e]=a,t(a)},a.onerror=n,a.src=e}}))}var L=x,R=n("a094"),U=[{x:400,y:670,h:500,w:500},{x:880,y:1420,h:500,w:500},{x:400,y:2170,h:500,w:500},{x:880,y:2920,h:500,w:500},{x:400,y:3670,h:500,w:500},{x:880,y:4420,h:500,w:500}],A={name:"Merge",components:{ButtonLoadFile:R["a"]},data:function(){return{width:1300,height:5500,context:null,backgroundImage:null,imagesUploaded:[],backgroundURLs:["sock_bg/AFS32.png","https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/merchant-taking-sale-with-chip-and-swipe-reader.jpg?v=1593507608"]}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),t.next=3,L(e.backgroundURLs[0]);case 3:e.backgroundImage=t.sent,e.context.drawImage(e.backgroundImage,0,0);case 5:case"end":return t.stop()}}),t)})))()},methods:{save:function(){this.$refs.canvas.toBlob((function(e){Object(y["saveAs"])(e,"merge.png")}),"image/png",1)},changeBackground:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,L(e);case 2:t.backgroundImage=n.sent,t.render();case 4:case"end":return n.stop()}}),n)})))()},onImageLoaded:function(e){var t,n=w(e);try{for(n.s();!(t=n.n()).done;){var o=t.value.source,r=o.img;this.imagesUploaded.push(r)}}catch(a){n.e(a)}finally{n.f()}this.render()},render:function(e){var t=this.context;if(t.clearRect(0,0,this.width,this.height),t.drawImage(this.backgroundImage,0,0,this.width,this.height),0<this.imagesUploaded.length){var n,o=this.imagesUploaded.length,r=w(U.entries());try{for(r.s();!(n=r.n()).done;){var a=v(n.value,2),i=a[0],c=a[1],u=c.x,s=c.y,l=c.w,d=c.h,f=this.imagesUploaded[i%o];t.drawImage(f,0,0,f.width,f.height,u-l/2,s-d/2,l,d)}}catch(b){r.e(b)}finally{r.f()}}}}};n("1e8b");A.render=b;t["default"]=A},bd0c:function(e,t,n){}}]);
//# sourceMappingURL=Merge.963fb051.js.map