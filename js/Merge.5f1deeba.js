(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Merge"],{"1e8b":function(t,e,n){"use strict";n("bd0c")},"21a6":function(t,e,n){(function(n){var i,r,o;(function(n,a){r=[],i=a,o="function"===typeof i?i.apply(e,r):i,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function i(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){s(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,n){var s=a.URL||a.webkitURL,c=document.createElement("a");e=e||t.name||"download",c.download=e,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?o(c):r(c.href)?i(t,e,n):o(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,a),n);else if(r(t))i(t,n,a);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){o(s)}))}}:function(t,e,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return i(t,e,n);var o="application/octet-stream"===t.type,s=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var p=a.URL||a.webkitURL,l=p.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){p.revokeObjectURL(l)}),4e4)}});a.saveAs=s.saveAs=s,t.exports=s}))}).call(this,n("c8ba"))},4863:function(t,e,n){"use strict";n.r(e);var i=n("5c40"),r={class:"page-merge"},o={class:"page-merge__left"},a={class:"page-merge__left__content"},s=Object(i["j"])("i",{class:"ion-md-image"},null,-1),c=Object(i["i"])(" 保存 "),u={class:"page-merge__middle"},p=Object(i["j"])("i",{class:"ion-md-folder-open"},null,-1),l=Object(i["i"])(" 打开 "),h=Object(i["j"])("div",{class:"page-merge__right"},null,-1);function d(t,e){var n=Object(i["w"])("ButtonLoadFile"),d=Object(i["w"])("Crop");return Object(i["s"])(),Object(i["e"])("article",r,[Object(i["j"])("div",o,[Object(i["j"])("div",a,[Object(i["j"])("canvas",{ref:"canvas",width:t.width,height:t.height},null,8,["width","height"]),Object(i["j"])("ul",null,[(Object(i["s"])(!0),Object(i["e"])(i["b"],null,Object(i["u"])(t.backgroundURLs,(function(e){return Object(i["s"])(),Object(i["e"])("li",{key:e},[Object(i["j"])("img",{src:e,onClick:function(n){return t.changeBackground(e)}},null,8,["src","onClick"])])})),128))]),Object(i["j"])("button",{class:"a-button a-button--success a-button-save",onClick:e[1]||(e[1]=function(){return t.save.apply(t,arguments)})},[s,c])])]),Object(i["j"])("div",u,[Object(i["j"])("ul",null,[(Object(i["s"])(!0),Object(i["e"])(i["b"],null,Object(i["u"])(t.imagesUploaded,(function(t){var e=t.src;return Object(i["s"])(),Object(i["e"])("li",{class:"img",key:e},[Object(i["j"])("img",{src:e},null,8,["src"])])})),128)),Object(i["j"])("li",null,[Object(i["j"])(n,{onLoaded:t.onImageLoaded,class:"button-add p-0 a-button a-button--dark a-button--outline"},{default:Object(i["C"])((function(){return[p,l]})),_:1},8,["onLoaded"])])]),Object(i["j"])(d,{style:{border:"1px solid #ccc",width:"600px"}})]),h])}n("d3b7"),n("ddb0");function f(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b"),n("3ca3");function v(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(c){r=!0,o=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(r)throw o}}return n}}var m=n("06c5");function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){return f(t)||v(t,e)||Object(m["a"])(t,e)||g()}function b(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(m["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}n("96cf");var w=n("1da1"),T=n("21a6"),x=(n("25f0"),{});function j(t){return"[object HTMLImageElement]"===Object.prototype.toString.call(t)}function O(t){return new Promise((function(e,n){if(j(t))e(t);else if(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(t)){var i=document.createElement("canvas");i.width=1,i.height=1;var r=i.getContext("2d");r.fillStyle=t,r.fillRect(0,0,1,1),O(i.toDataURL()).then(e)}else{if(x[t])return void e(x[t]);var o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){x[t]=o,e(o)},o.onerror=n,o.src=t}}))}var M=O,E=n("a094"),P=[{x:400,y:670,h:500,w:500},{x:880,y:1420,h:500,w:500},{x:400,y:2170,h:500,w:500},{x:880,y:2920,h:500,w:500},{x:400,y:3670,h:500,w:500},{x:880,y:4420,h:500,w:500}],L=Object(i["D"])("data-v-a095fac6"),I=L((function(t,e){return Object(i["s"])(),Object(i["e"])("canvas",{onTap:e[1]||(e[1]=function(){return t.onTap.apply(t,arguments)}),onPanstart:e[2]||(e[2]=function(){return t.onPanstart.apply(t,arguments)}),onPanmove:e[3]||(e[3]=function(){return t.onPanmove.apply(t,arguments)}),onPanend:e[4]||(e[4]=function(){return t.onPanend.apply(t,arguments)}),ref:"c",width:t.width,height:t.height},null,40,["width","height"])})),S=(n("cb29"),n("a9e3"),function(t,e){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},S(t,e)});function _(t,e){function n(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var k=function(){return k=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},k.apply(this,arguments)};function A(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function C(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=o.next()).done)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}var z=function(){function t(){this.listenersMap={}}return t.prototype.target=function(t){var e=this;return{on:function(n,i){e.on(n,i,{target:t})}}},t.prototype.on=function(t,e,n){var i,r,o=(void 0===n?{}:n).target,a=Array.isArray(t)?t:[t];try{for(var s=C(a),c=s.next();!c.done;c=s.next()){var u=c.value;void 0===this.listenersMap[u]&&(this.listenersMap[u]=[]),void 0!==o&&(e.target=o),this.listenersMap[u].push(e)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t.prototype.off=function(t,e){var n=this.listenersMap[t];if(void 0!==n)if(void 0===e)delete this.listenersMap[t];else{var i=n.findIndex((function(t){return t===e}));n.splice(i,1)}},t.prototype.emit=function(t,e,n){var i,r;void 0===n&&(n=function(){return!0});var o=this.listenersMap[t];if(void 0!==o&&0<o.length)try{for(var a=C(o),s=a.next();!s.done;s=a.next()){var c=s.value,u=c.target;n({target:u})&&c(e)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}},t.prototype.destroy=function(){this.listenersMap={}},t}(),D=z,U=Object.prototype.toString;function F(t){return"[object RegExp]"===U.call(t)}function V(t){return"[object Function]"===U.call(t)}var X="clientX",Y="clientY",N=16,B="start",H="move",G="cancel",$="end",q="left",J="right",W="up",Z="down",K="none",Q="touch",tt="mouse",et=Q+B,nt=Q+H,it=Q+$,rt=Q+G,ot=tt+W,at=tt+H,st=tt+Z,ct=window.wx||"on"+et in window,ut="p",pt=B,lt=H,ht=$,dt="r",ft="f",vt=G;function mt(t){return Math.round(100*t)/100}var gt=function(){function t(){}return t}(),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.load=function(t,e){var n=[],i=[];Array.from(t.touches).forEach((function(t){var r=t.clientX,o=t.clientY,a=t.target;(null===e||void 0===e?void 0:e.contains(a))&&(n.push(a),i.push({clientX:r,clientY:o,target:a}))}));var r=Array.from(t.changedTouches).map((function(t){var e=t.clientX,n=t.clientY,i=t.target;return{clientX:e,clientY:n,target:i}}));return{inputType:t.type.replace("touch",""),changedPoints:r,points:i,nativeEvent:t,target:t.target,targets:n}},e}(gt),bt=function(t){function e(){var e=t.call(this)||this;return e.target=null,e.isPressed=!1,e}return _(e,t),e.prototype.load=function(t){var e,n=t.clientX,i=t.clientY,r=t.type,o=t.button,a=t.target,s=[{clientX:n,clientY:i,target:a}];st===r&&0===o?(this.target=a,this.isPressed=!0,e=B):this.isPressed&&(at===r?e=H:ot===r&&(s=[],e=$,this.isPressed=!1));var c=this.prevPoints||[{clientX:n,clientY:i,target:a}];if(this.prevPoints=[{clientX:n,clientY:i,target:a}],void 0!==e)return{inputType:e,changedPoints:c,points:s,target:this.target,targets:[this.target],nativeEvent:t}},e}(gt),wt=function(){function t(t){var e=ct?yt:bt;this.adapter=new e,this.id=0,this.el=t}return t.prototype.transform=function(t){this.prevInput=this.activeInput;var e=this.adapter.load(t,this.el);if(void 0!==e){var n=Number.MAX_SAFE_INTEGER>this.id?++this.id:1,i=k(k({},e),{id:n}),r=xt(i);this.activeInput=r;var o=r.isStart,a=r.pointLength;return o&&(this.startInput=r,this.prevInput=void 0,this.startMultiInput=1<a?r:void 0),k(k({},r),{prevInput:this.prevInput,startMultiInput:this.startMultiInput,startInput:this.startInput})}},t}();function Tt(t){var e=t.length;if(0<e){if(1===e){var n=t[0],i=n.clientX,r=n.clientY;return{x:Math.round(i),y:Math.round(r)}}var o=t.reduce((function(t,e){return t.x+=e[X],t.y+=e[Y],t}),{x:0,y:0});return{x:Math.round(o.x/e),y:Math.round(o.y/e)}}}function xt(t){var e=t.inputType,n=t.points,i=t.changedPoints,r=t.nativeEvent,o=n.length,a=B===e,s=$===e&&0===o||G===e,c=performance.now(),u=Tt(n)||Tt(i),p=u.x,l=u.y,h=r.currentTarget;return k(k({},t),{x:p,y:l,timestamp:c,isStart:a,isEnd:s,pointLength:o,currentTarget:h,getOffset:function(t){void 0===t&&(t=h);var e=t.getBoundingClientRect();return{x:p-Math.round(e.left),y:l-Math.round(e.top)}}})}function jt(t,e,n){e.target,e.currentTarget;var i,r=e.type,o=A(e,["target","currentTarget","type"]);return document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(r,null===n||void 0===n?void 0:n.bubbles,null===n||void 0===n?void 0:n.cancelable)):i=new Event(r,n),Object.assign(i,o,{match:function(){return e.targets.every((function(t){return i.currentTarget.contains(t)}))}}),t.dispatchEvent(i)}function Ot(t,e){if(!e.isPreventDefault)return!1;var n=!0;if(null!==t.target){var i=e.preventDefaultExclude;if(F(i)){if("tagName"in t.target){var r=t.target.tagName;n=!i.test(r)}}else V(i)&&(n=!i(t))}return n}var Mt=[et,nt,it,rt];function Et(t,e,n,i){return ct||"Touch"===i?(Mt.forEach((function(i){t.addEventListener(i,e,n)})),function(){Mt.forEach((function(n){t.removeEventListener(n,e)}))}):(t.addEventListener(st,e,n),window.addEventListener(at,e,n),window.addEventListener(ot,e,n),function(){t.removeEventListener(st,e),window.removeEventListener(at,e),window.removeEventListener(ot,e)})}function Pt(t,e,n){var i=null===n||void 0===n?void 0:n.name;if(void 0===i||void 0===t.recognizerMap[i]){var r=new e(n);t.recognizerMap[r.name]=r,r.recognizerMap=t.recognizerMap,t.recognizers.push(t.recognizerMap[r.name])}}function Lt(t,e){var n,i;if(void 0===e)t.recognizers=[],t.recognizerMap={};else try{for(var r=C(t.recognizers.entries()),o=r.next();!o.done;o=r.next()){var a=R(o.value,2),s=a[0],c=a[1];if(e===c.options.name){t.recognizers.splice(s,1),delete t.recognizerMap[e];break}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}var It="at:after";function St(t,e){var n=e.type,i=e.target,r=e.targets;t.emit(n,e,(function(t){if(void 0!==(null===t||void 0===t?void 0:t.target)){var e=t.target;return r.every((function(t){return e.contains(t)}))}return!0})),t.emit(It,e),t.options.domEvents&&void 0!==t.el&&null!==i&&(jt(i,e,t.options.domEvents),jt(i,k(k({},e),{_type:e.type,type:It}),t.options.domEvents))}var _t={domEvents:{bubbles:!0,cancelable:!0},isPreventDefault:!0,preventDefaultExclude:/^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/},kt=function(t){function e(n,i){var r=t.call(this)||this;if(r.recognizerMap={},r.recognizers=[],r.cacheComputedFunctionGroup=Object.create(null),r.el=n,r.input=new wt(n),r.options=k(k({},_t),i),r.recognizerMap=e.recognizerMap,r.recognizers=e.recognizers,void 0!==n){n.style.webkitTapHighlightColor="rgba(0,0,0,0)";var o=!1;try{var a={};Object.defineProperty(a,"passive",{get:function(){o=!0}}),window.addEventListener("_",(function(){}),a)}catch(s){}r.on("unbind",Et(n,r.catchEvent.bind(r),!(r.options.isPreventDefault||!o)&&{passive:!0},r.options.device))}return r}return _(e,t),e.prototype.use=function(t,e){Pt(this,t,e)},e.prototype.removeUse=function(t){Lt(this,t)},e.prototype.catchEvent=function(t){var e,n,i=this;Ot(t,this.options)&&t.preventDefault();var r=this.input.transform(t);if(void 0!==r){var o="at:"+Q,a=o+r.inputType;this.emit(o,r),this.emit(a,r);var s=this.options.domEvents;if(!1!==s){var c=t.target;null!==c&&(jt(c,k(k({},r),{type:o}),s),jt(c,k(k({},r),{type:a}),s))}var u=Object.create(null),p=function(t){if(t.disabled)return"continue";t.computedGroup=u,t.computeFunctionMap=l.cacheComputedFunctionGroup,t.recognize(r,(function(e,n){var o=k(k(k({},r),n),{type:e,baseType:t.name});Object.freeze(o),void 0===i.beforeEachHook?St(i,o):i.beforeEachHook(t,(function(){St(i,o)}))})),u=t.computedGroup,l.cacheComputedFunctionGroup=t.computeFunctionMap},l=this;try{for(var h=C(this.recognizers),d=h.next();!d.done;d=h.next()){var f=d.value;p(f)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}}},e.prototype.beforeEach=function(t){this.beforeEachHook=t},e.prototype.get=function(t){return this.recognizerMap[t]},e.prototype.set=function(t){this.options=k(k({},this.options),t)},e.prototype.destroy=function(){this.emit("unbind"),this.listenersMap={}},e.version="0.7.7",e.recognizers=[],e.recognizerMap={},e.use=function(t,n){Pt(e,t,n)},e.removeUse=function(t){Lt(e,t)},e}(D),At=kt;function Ct(t){-1!==[ht,vt,dt,ft].indexOf(t.status)&&(t.status=ut)}function Rt(t,e,n){var i,r,o,a,s,c,u,p={1:(i={},i[ut]=(r={},r[H]=pt,r),i[pt]=(o={},o[H]=lt,o[$]=ht,o[G]=vt,o),i[lt]=(a={},a[H]=lt,a[$]=ht,a[G]=vt,a),i),0:(s={},s[pt]=(c={},c[H]=vt,c[$]=ht,c[G]=vt,c),s[lt]=(u={},u[B]=ft,u[H]=vt,u[$]=ht,u[G]=vt,u),s)};return void 0!==p[Number(t)][e]&&p[Number(t)][e][n]||e}function zt(t,e,n){var i=t.test(e);Ct(t);var r=e.inputType;t.status=Rt(i,t.status,r);var o=t.computed;t.isRecognized=[pt,lt].includes(t.status);var a=t.name,s=t.status,c=t.isRecognized;return c&&n(a,o),(c||[ht,vt].includes(t.status))&&n(a+s,o),i}var Dt=function(){function t(t){this.disabled=!1,this.status=ut,this.isRecognized=!1,this.recognizerMap={},this.computedGroup={},this.computed={},this.computeFunctionMap={},this.options=t,this.name=this.options.name}return t.prototype.set=function(t){return void 0!==t&&(this.options=k(k({},this.options),t)),this},t.prototype.isValidPointLength=function(t){return 0===this.options.pointLength||this.options.pointLength===t},t.prototype.compute=function(t,e){var n,i,r=Object.create(null);try{for(var o=C(t),a=o.next();!a.done;a=o.next()){var s=a.value,c=s._id,u=this,p=u.computedGroup,l=u.computeFunctionMap;for(var h in void 0===l[c]&&(l[c]=s()),p[c]=p[c]||l[c](e),p[c])r[h]=p[c][h]}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r},t}(),Ut=Dt,Ft=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Vt=function(t,e){return t.x*e.x+t.y*e.y},Xt=function(t,e){var n=Ft(t)*Ft(e);if(0===n)return 0;var i=Vt(t,e)/n;return i>1&&(i=1),Math.acos(i)},Yt=function(t,e){return t.x*e.y-e.x*t.y},Nt=function(t){return t/Math.PI*180},Bt=function(t,e){var n=Xt(t,e);return Yt(t,e)>0&&(n*=-1),Nt(n)},Ht=function(t,e){return t===e?K:Math.abs(t)>Math.abs(e)?0<t?J:q:0<e?Z:W};function Gt(t){var e=t.startV,n=t.prevV,i=t.activeV,r=Math.round(Bt(i,n)),o=Math.round(Bt(i,e));return{angle:o,deltaAngle:r}}function $t(){return function(t){var e=t.prevInput,n=0,i=0,r=0;if(void 0!==e&&(n=t.x-e.x,i=t.y-e.y,0!==n||0!==i)){var o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));r=Math.round(Nt(Math.acos(Math.abs(n)/o)))}return{deltaX:n,deltaY:i,deltaXYAngle:r}}}function qt(){var t=0,e=0,n=0,i=0,r=0,o=K;return function(a){var s=a.inputType,c=a.startInput;return B===s?(t=0,e=0,n=0,i=0,r=0,o=K):H===s&&(t=Math.round(a.points[0][X]-c.points[0][X]),e=Math.round(a.points[0][Y]-c.points[0][Y]),n=Math.abs(t),i=Math.abs(e),r=Math.round(Ft({x:n,y:i})),o=Ht(t,e)),{displacementX:t,displacementY:e,distanceX:n,distanceY:i,distance:r,overallDirection:o}}}function Jt(){var t=0;return function(e){var n=e.inputType;return B===n&&(t=e.pointLength),{maxPointLength:t}}}function Wt(t){var e=t.startV,n=t.prevV,i=t.activeV,r=mt(Ft(i)/Ft(n)),o=mt(Ft(i)/Ft(e));return{scale:o,deltaScale:r}}function Zt(){var t,e,n=0,i=0,r=0,o=0;return function(a){if(void 0!==a){var s=a.inputType;e=e||a.startInput;var c=a.timestamp-e.timestamp;if(H===s&&N<c){var u=a.x-e.x,p=a.y-e.y;r=Math.round(u/c*100)/100,o=Math.round(p/c*100)/100,n=Math.abs(r),i=Math.abs(o),t=Ht(u,p)||t,e=a}}return{velocityX:n,velocityY:i,speedX:r,speedY:o,direction:t}}}function Kt(t){return{x:t.points[1][X]-t.points[0][X],y:t.points[1][Y]-t.points[0][Y]}}function Qt(){return function(t){var e=t.prevInput,n=t.startMultiInput;if(void 0!==n&&void 0!==e&&t.id!==n.id&&1<e.pointLength&&1<t.pointLength)return{startV:Kt(n),prevV:Kt(e),activeV:Kt(t)}}}$t._id="ComputeDeltaXY",qt._id="computeDistance",Jt._id="computeMaxLength",Zt._id="ComputeVAndDir",Qt._id="ComputeVectorForMutli";var te={name:"tap",pointLength:1,tapTimes:1,waitNextTapTime:300,maxDistance:2,maxDistanceFromPrevTap:9,maxPressTime:250},ee=function(t){function e(e){var n=t.call(this,k(k({},te),e))||this;return n.tapCount=0,n}return _(e,t),e.prototype._isValidDistanceFromPrevTap=function(t){if(void 0!==this.prevTapPoint){var e=Ft({x:t.x-this.prevTapPoint.x,y:t.y-this.prevTapPoint.y});return this.prevTapPoint=t,this.options.maxDistanceFromPrevTap>=e}return this.prevTapPoint=t,!0},e.prototype._isValidInterval=function(){var t=performance.now();if(void 0===this.prevTapTime)return this.prevTapTime=t,!0;var e=t-this.prevTapTime;return this.prevTapTime=t,e<this.options.waitNextTapTime},e.prototype.recognize=function(t,e){var n=t.inputType,i=t.x,r=t.y;this.computed=this.compute([Jt,qt],t),$===n&&(this.status=ut,this.test(t)?(this.cancelCountDownToFail(),this._isValidDistanceFromPrevTap({x:i,y:r})&&this._isValidInterval()?this.tapCount++:this.tapCount=1,0===this.tapCount%this.options.tapTimes?(this.status=dt,e(this.options.name,k(k({},this.computed),{tapCount:this.tapCount})),this.reset()):this.countDownToFail()):(this.reset(),this.status=ft))},e.prototype.countDownToFail=function(){var t=this;this._countDownToFailTimer=setTimeout((function(){t.status=ft,t.reset()}),this.options.waitNextTapTime)},e.prototype.cancelCountDownToFail=function(){clearTimeout(this._countDownToFailTimer)},e.prototype.reset=function(){this.tapCount=0,this.prevTapPoint=void 0,this.prevTapTime=void 0},e.prototype.test=function(t){var e=t.startInput,n=t.pointLength,i=t.timestamp-e.timestamp,r=this.computed,o=r.maxPointLength,a=r.distance;return o===this.options.pointLength&&0===n&&this.options.maxDistance>=a&&this.options.maxPressTime>i},e}(Ut),ne=ee,ie={name:"pan",threshold:10,pointLength:1},re=function(t){function e(e){return t.call(this,k(k({},ie),e))||this}return _(e,t),e.prototype.test=function(t){var e=t.pointLength,n=this.computed.distance;return(this.isRecognized||this.options.threshold<=n)&&this.isValidPointLength(e)},e.prototype.recognize=function(t,e){this.computed=this.compute([Zt,qt,$t],t);var n=void 0!==this.computed.direction&&zt(this,t,e);n&&e(this.options.name+this.computed.direction,this.computed)},e}(Ut),oe=re,ae={name:"swipe",threshold:10,velocity:.3,pointLength:1},se=function(t){function e(e){return t.call(this,k(k({},ae),e))||this}return _(e,t),e.prototype.test=function(t){var e=t.inputType;if($!==e)return!1;var n=this.computed,i=n.velocityX,r=n.velocityY,o=n.maxPointLength,a=n.distance;return this.options.pointLength===o&&this.options.threshold<a&&this.options.velocity<Math.max(i,r)},e.prototype.recognize=function(t,e){this.computed=this.compute([Jt,Zt,qt],t),this.test(t)&&(e(this.options.name,this.computed),e(this.options.name+this.computed.direction,this.computed))},e}(Ut),ce=se,ue={name:"press",pointLength:1,maxDistance:9,minPressTime:251},pe=function(t){function e(e){return t.call(this,k(k({},ue),e))||this}return _(e,t),e.prototype.recognize=function(t,e){var n=this,i=t.inputType,r=t.startInput,o=t.pointLength;if(B===i&&this.isValidPointLength(o))Ct(this),this.cancel(),this._timeoutId=setTimeout((function(){n.status=dt,e(n.options.name,t)}),this.options.minPressTime);else if($===i&&dt===this.status)e(""+this.options.name+W,this.computed);else if(dt!==this.status){var a=t.timestamp-r.timestamp;(!this.test(t)||this.options.minPressTime>a&&[$,G].includes(i))&&(this.cancel(),this.status=ft)}},e.prototype.test=function(t){this.computed=this.compute([qt],t);var e=this.computed.distance;return this.options.maxDistance>e},e.prototype.cancel=function(){clearTimeout(this._timeoutId)},e}(Ut),le=pe,he={name:"pinch",threshold:0,pointLength:2},de=function(t){function e(e){return t.call(this,k(k({},he),e))||this}return _(e,t),e.prototype.test=function(t){var e=t.pointLength,n=this.computed.scale;return this.isValidPointLength(e)&&void 0!==n&&(this.options.threshold<Math.abs(n-1)||this.isRecognized)},e.prototype.recognize=function(t,e){var n=this.compute([Qt],t);"activeV"in n&&(this.computed=k(k({},this.computed),Wt(n))),zt(this,t,e)},e}(Ut),fe=de,ve={name:"rotate",threshold:0,pointLength:2},me=function(t){function e(e){return t.call(this,k(k({},ve),e))||this}return _(e,t),e.prototype.test=function(t){var e=t.pointLength,n=this.computed.angle;return this.isValidPointLength(e)&&(this.options.threshold<Math.abs(n)||this.isRecognized)},e.prototype.recognize=function(t,e){var n=this.compute([Qt],t);"activeV"in n&&(this.computed=k(k({},this.computed),Gt(n))),zt(this,t,e)},e}(Ut),ge=me;At.use(ne),At.use(oe),At.use(ce),At.use(le),At.use(fe),At.use(ge),At.Tap=ne,At.Pan=oe,At.Swipe=ce,At.Press=le,At.Pinch=fe,At.Rotate=ge,At.STATUS_POSSIBLE=ut,At.STATUS_START=pt,At.STATUS_MOVE=lt,At.STATUS_END=ht,At.STATUS_CANCELLED=vt,At.STATUS_FAILED=ft,At.STATUS_RECOGNIZED=dt;var ye=At,be={name:"Crop",props:{width:{type:Number,default:2e3},height:{type:Number,default:2e3}},data:function(){return{at:null,context:null,stack:[]}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/Purple-and-Yellow-Playful-Monster-Daycare-Halloween-Flyer.jpg?v=1595652895",t.context=t.$refs.c.getContext("2d"),e.t0=t.context,e.next=5,M(n);case 5:e.t1=e.sent,e.t2=t.width,e.t3=t.height,e.t0.drawImage.call(e.t0,e.t1,0,0,e.t2,e.t3),t.at=new ye(t.$el),t.at.get("pan").set({threshold:0});case 11:case"end":return e.stop()}}),e)})))()},methods:{switchPointToCanvas:function(t){var e=y(t,2),n=e[0],i=e[1],r=this.$refs.c.getBoundingClientRect(),o=r.top,a=r.left,s=this.$refs.c.offsetWidth,c=this.width/s;return[(n-a)*c,(i-o)*c]},onPanstart:function(t){var e=this.switchPointToCanvas([t.x,t.y]),n=y(e,2),i=n[0],r=n[1];this.stack.push({type:"point",x:i,y:r});var o=this.context;o.save(),o.strokeStyle="#f50",o.lineWidth=6,o.beginPath(),o.moveTo(i,r)},onPanmove:function(t){var e=this.switchPointToCanvas([t.x,t.y]),n=y(e,2),i=n[0],r=n[1];this.stack.push({type:"point",x:i,y:r});var o=this.context;o.lineTo(i,r),o.stroke()},onPanend:function(){var t=this.context;t.closePath(),t.restore()},onTap:function(t){var e=this.switchPointToCanvas([t.x,t.y]),n=y(e,2),i=n[0],r=n[1];this.stack.push({type:"circle",x:i,y:r,r:30,fill:"#69C"}),this.draw()},drawCircle:function(t){var e=t.x,n=t.y,i=t.r,r=t.fill,o=this.context;o.save(),o.beginPath(),o.arc(e,n,i,0,2*Math.PI,!1),o.fillStyle=r,o.fill(),o.closePath(),o.restore()},draw:function(){var t,e=b(this.stack);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.drawCircle(n)}}catch(i){e.e(i)}finally{e.f()}}}};n("5896");be.render=I,be.__scopeId="data-v-a095fac6";var we=be,Te={name:"Merge",components:{ButtonLoadFile:E["a"],Crop:we},data:function(){return{width:1300,height:5500,context:null,backgroundImage:null,imagesUploaded:[],backgroundURLs:["sock_bg/AFS32.png","https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/merchant-taking-sale-with-chip-and-swipe-reader.jpg?v=1593507608"]}},mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.context=t.$refs.canvas.getContext("2d"),e.next=3,M(t.backgroundURLs[0]);case 3:t.backgroundImage=e.sent,t.context.drawImage(t.backgroundImage,0,0);case 5:case"end":return e.stop()}}),e)})))()},methods:{save:function(){this.$refs.canvas.toBlob((function(t){Object(T["saveAs"])(t,"merge.png")}),"image/png",1)},changeBackground:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,M(t);case 2:e.backgroundImage=n.sent,e.render();case 4:case"end":return n.stop()}}),n)})))()},onImageLoaded:function(t){var e,n=b(t);try{for(n.s();!(e=n.n()).done;){var i=e.value.source,r=i.img;this.imagesUploaded.push(r)}}catch(o){n.e(o)}finally{n.f()}this.render()},render:function(t){var e=this.context;if(e.clearRect(0,0,this.width,this.height),e.drawImage(this.backgroundImage,0,0,this.width,this.height),0<this.imagesUploaded.length){var n,i=this.imagesUploaded.length,r=b(P.entries());try{for(r.s();!(n=r.n()).done;){var o=y(n.value,2),a=o[0],s=o[1],c=s.x,u=s.y,p=s.w,l=s.h,h=this.imagesUploaded[a%i];e.drawImage(h,0,0,h.width,h.height,c-p/2,u-l/2,p,l)}}catch(d){r.e(d)}finally{r.f()}}}}};n("1e8b");Te.render=d;e["default"]=Te},5896:function(t,e,n){"use strict";n("a1d3")},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),r=n("23cb"),o=n("50c4");t.exports=function(t){var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:r(c,n);while(u>s)e[s++]=t;return e}},a1d3:function(t,e,n){},bd0c:function(t,e,n){},cb29:function(t,e,n){var i=n("23e7"),r=n("81d5"),o=n("44d2");i({target:"Array",proto:!0},{fill:r}),o("fill")}}]);
//# sourceMappingURL=Merge.5f1deeba.js.map