{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/views/Crop.vue?dcad","webpack:///./src/views/Crop.vue","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///../node_modules/@any-touch/core/node_modules/any-event/dist/index.es.js","webpack:///../node_modules/@any-touch/shared/dist/index.es.js","webpack:///../node_modules/@any-touch/core/dist/index.es.js","webpack:///../node_modules/@any-touch/recognizer/dist/index.es.js","webpack:///../node_modules/@any-touch/vector/dist/index.es.js","webpack:///../node_modules/@any-touch/compute/dist/index.es.js","webpack:///../node_modules/@any-touch/tap/dist/index.es.js","webpack:///../node_modules/@any-touch/pan/dist/index.es.js","webpack:///../node_modules/@any-touch/swipe/dist/index.es.js","webpack:///../node_modules/@any-touch/press/dist/index.es.js","webpack:///../node_modules/@any-touch/pinch/dist/index.es.js","webpack:///../node_modules/@any-touch/rotate/dist/index.es.js","webpack:///../node_modules/any-touch/dist/index.es.js","webpack:///./src/views/Crop.vue?c6be","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","prototype","toObject","toAbsoluteIndex","toLength","O","this","argumentsLength","arguments","index","endPos","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","code","it","charCodeAt","NaN","slice","parseInt","key","NumberWrapper","valueOf","call","keys","split","j","_createForOfIteratorHelper","o","allowArrayLike","F","s","n","e","normalCompletion","didErr","step","_e2","class","onTap","onPanstart","onPanmove","onPanend","ref","width","height","extendStatics","d","b","__proto__","p","hasOwnProperty","__extends","__","__assign","assign","t","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","m","__read","r","ar","error","default_1","listenersMap","target","el","_this","on","eventName","listener","_a","e_1","_b","eventNames","eventNames_1","eventNames_1_1","name","e_1_1","return","off","listeners","findIndex","fn","splice","emit","payload","beforeHook","e_2","listeners_1","listeners_1_1","e_2_1","destroy","ObjectToString","toString","isRegExp","input","isFunction","CLIENT_X","CLIENT_Y","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_CANCEL","INPUT_END","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","NONE","TOUCH","MOUSE","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","MOUSE_UP","MOUSE_MOVE","MOUSE_DOWN","SUPPORT_TOUCH","window","wx","STATUS_POSSIBLE","STATUS_START","STATUS_MOVE","STATUS_END","STATUS_RECOGNIZED","STATUS_FAILED","STATUS_CANCELLED","round2","Math","round","default_1$1","_super","load","event","targets","points","from","touches","forEach","clientX","clientY","contains","changedPoints","changedTouches","map","inputType","type","nativeEvent","default_1$2","isPressed","button","prevPoints","default_1$3","Input","adapter","id","transform","prevInput","activeInput","baseInputWithoutId","Number","MAX_SAFE_INTEGER","baseInput","pureInput","extendInput","isStart","pointLength","startInput","startMultiInput","getCenter","x","y","countPoint","reduce","point","inputBase","isEnd","timestamp","performance","now","currentTarget","getOffset","rect","getBoundingClientRect","left","top","dispatchDomEvent","eventInit","data","document","createEvent","initEvent","bubbles","cancelable","Event","match","every","dispatchEvent","canPreventDefault","options","isPreventDefault","preventDefaultExclude","tagName","test","TOUCH_EVENT_NAMES","bindElement","callback","device","addEventListener","removeEventListener","use","instanceOrClass","Recognizer","recognizerMap","instance","recognizers","removeUse","recognizerName","entries","_c","recognizer","AT_AFTER","emit2","at","currentTarget_1","domEvents","_type","DEFAULT_OPTIONS","AnyTouch","cacheComputedFunctionGroup","style","webkitTapHighlightColor","supportsPassive_1","opts","get","catchEvent","bind","passive","preventDefault","AT_TOUCH","AT_TOUCH_WITH_STATUS","cacheComputedGroup","_loop_1","disabled","computedGroup","computeFunctionMap","this_1","recognize","ev","baseType","freeze","beforeEachHook","beforeEach","hook","set","version","resetStatus","status","flow","isVaild","activeStatus","_f","_g","STATE_MAP","1","0","recognizeForPressMoveLike","computed","isRecognized","includes","isValidPointLength","compute","Cs","Cs_1","Cs_1_1","C","_id","getVLength","v","sqrt","getDotProduct","v1","v2","getRadian","mr","acos","getCross","radianToAngle","radian","PI","getAngle","angle","getDirection","abs","computeAngle","startV","prevV","activeV","deltaAngle","ComputeDeltaXY","deltaX","deltaY","deltaXYAngle","deltaXY","pow","computeDistance","displacementX","displacementY","distanceX","distanceY","distance","overallDirection","computeMaxLength","maxPointLength","computeScale","deltaScale","scale","ComputeVAndDir","direction","_lastValidInput","velocityX","velocityY","speedX","speedY","deltaTime","computeVector","ComputeVectorForMutli","tapTimes","waitNextTapTime","maxDistance","maxDistanceFromPrevTap","maxPressTime","tapCount","_isValidDistanceFromPrevTap","center","prevTapPoint","distanceFromPreviousTap","_isValidInterval","prevTapTime","interval","cancelCountDownToFail","reset","countDownToFail","_countDownToFailTimer","setTimeout","clearTimeout","threshold","velocity","max","minPressTime","cancel","_timeoutId","Tap","Pan","Swipe","Press","Pinch","Rotate","props","default","context","stack","paths","activePath","activePathPoints","hitItem","canDrawPath","mounted","$refs","c","getContext","$el","methods","switchPointToCanvas","offsetWidth","rate","hitTest","drawCircle","fill","globalCompositeOperation","save","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","closePath","restore","console","log","quadraticCurveTo","arc","fillStyle","item","startPoint","isPointInPath","draw","render","__scopeId","$","addToUnscopables","proto"],"mappings":"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","file":"js/Crop.90da3ea3.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Crop.vue?vue&type=style&index=0&id=27770f16&scoped=true&lang=scss\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Crop.vue?vue&type=style&index=0&id=27770f16&scoped=true&lang=scss\"","<template>\r\n    <canvas\r\n        class=\"crop\"\r\n        @tap=\"onTap\"\r\n        @panstart=\"onPanstart\"\r\n        @panmove=\"onPanmove\"\r\n        @panend=\"onPanend\"\r\n        ref=\"c\"\r\n        :width=\"width\"\r\n        :height=\"height\"\r\n    />\r\n</template>\r\n\r\n<script>\r\nimport AnyTouch from 'any-touch';\r\nimport loadImage from '../../../packages/load-image/dist/index.es';\r\nexport default {\r\n    name: 'Crop',\r\n\r\n    props: {\r\n        width: {\r\n            type: Number,\r\n            default: 2000,\r\n        },\r\n        height: {\r\n            type: Number,\r\n            default: 2000,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            at: null,\r\n            context: null,\r\n            stack: [],\r\n            paths: [],\r\n            activePath: [],\r\n            activePathPoints: [],\r\n            hitItem: null,\r\n            canDrawPath: true,\r\n        };\r\n    },\r\n\r\n    async mounted() {\r\n        const URL =\r\n            'https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/Purple-and-Yellow-Playful-Monster-Daycare-Halloween-Flyer.jpg?v=1595652895';\r\n        this.context = this.$refs.c.getContext('2d');\r\n        // this.context.drawImage(await loadImage(URL), 0, 0, this.width, this.height);\r\n        this.at = new AnyTouch(this.$el);\r\n        this.at.get('pan').set({ threshold: 0 });\r\n    },\r\n\r\n    methods: {\r\n        switchPointToCanvas([x, y]) {\r\n            const { top, left } = this.$refs.c.getBoundingClientRect();\r\n            const { offsetWidth } = this.$refs.c;\r\n            const rate = this.width / offsetWidth;\r\n            return [Math.round((x - left) * rate), Math.round((y - top) * rate)];\r\n        },\r\n\r\n        onPanstart(e) {\r\n            this.hitItem = this.hitTest(e);\r\n            this.canDrawPath = !(void 0 === this.hitItem && 0 < this.stack.length);\r\n\r\n            const { context } = this;\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n\r\n            this.drawCircle({ x, y, r: 20, fill: '#69c' });\r\n            context.globalCompositeOperation = 'destination-over';\r\n            this.activePath = [[x, y]];\r\n            this.paths.push(this.activePath);\r\n            // this.activePathPoints = [{ type: 'point', x, y }];\r\n            // this.stack.push({ type: 'path', points: this.activePathPoints });\r\n            context.save();\r\n            context.strokeStyle = '#f50';\r\n            context.lineWidth = 16;\r\n            context.beginPath();\r\n            context.moveTo(x, y);\r\n        },\r\n\r\n        onPanmove(e) {\r\n            if (!this.canDrawPath) return;\r\n\r\n            // context.globalCompositeOperation = 'source-over';\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            this.activePath.push([x, y]);\r\n            // this.activePathPoints.push({ type: 'point', x, y });\r\n            const { context } = this;\r\n            context.lineTo(x, y);\r\n            context.stroke();\r\n        },\r\n\r\n        onPanend(e) {\r\n            if (!this.canDrawPath) return;\r\n\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            const { context } = this;\r\n            context.closePath();\r\n            context.restore();\r\n            context.globalCompositeOperation = 'source-over';\r\n            this.drawCircle({ x, y, r: 20, fill: '#123' });\r\n            console.log(this.paths);\r\n        },\r\n\r\n        onTap(e) {\r\n            const { context } = this;\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            if (void 0 === this.activePath.s) {\r\n                this.activePath = { s: [x, y] };\r\n                this.paths.push(this.activePath);\r\n                context.moveTo(x, y);\r\n            } else {\r\n                const { context } = this;\r\n                const { s } = this.activePath;\r\n                const c = [s[0] + (x - s[0]) / 2, s[1] + (y - s[1]) / 2];\r\n                this.activePath.c = c;\r\n                this.activePath.e = [x, y];\r\n                console.log(s, c, [x, y]);\r\n                context.quadraticCurveTo(c[0], c[1], x, y);\r\n                context.strokeStyle = '#f10';\r\n                context.lineWidth = 16;\r\n                context.stroke();\r\n                this.activePath = {};\r\n            }\r\n        },\r\n\r\n        drawCircle({ x, y, r, fill }) {\r\n            const { context } = this;\r\n            context.save();\r\n            context.beginPath();\r\n            context.arc(x, y, r, 0, 2 * Math.PI, false);\r\n            context.fillStyle = fill;\r\n            context.fill();\r\n            context.closePath();\r\n            context.restore();\r\n        },\r\n\r\n        hitTest(point) {\r\n            const [x, y] = this.switchPointToCanvas([point.x, point.y]);\r\n            for (const item of this.stack) {\r\n                if ('path' === item.type) {\r\n                    const startPoint = item.points[0];\r\n                    this.drawCircle({ x: startPoint.x, y: startPoint.y, r: 20 });\r\n                    if (this.context.isPointInPath(x, y)) {\r\n                        return item;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        draw() {\r\n            for (const item of this.stack) {\r\n                this.drawCircle(item);\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.crop {\r\n    display: block;\r\n}\r\n.crop {\r\n    max-width: 80%;\r\n    height: 80vh;\r\n    margin: 10vh auto;\r\n    box-shadow: 0 0 8px 1px rgba(#000, 0.1);\r\n}\r\n</style>\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __values } from 'tslib';\n\nvar default_1 = (function () {\r\n    function default_1() {\r\n        this.listenersMap = {};\r\n    }\r\n    default_1.prototype.target = function (el) {\r\n        var _this = this;\r\n        return {\r\n            on: function (eventName, listener) {\r\n                _this.on(eventName, listener, { target: el });\r\n            }\r\n        };\r\n    };\r\n    default_1.prototype.on = function (eventName, listener, _a) {\r\n        var e_1, _b;\r\n        var target = (_a === void 0 ? {} : _a).target;\r\n        var eventNames = Array.isArray(eventName) ? eventName : [eventName];\r\n        try {\r\n            for (var eventNames_1 = __values(eventNames), eventNames_1_1 = eventNames_1.next(); !eventNames_1_1.done; eventNames_1_1 = eventNames_1.next()) {\r\n                var name = eventNames_1_1.value;\r\n                if (void 0 === this.listenersMap[name]) {\r\n                    this.listenersMap[name] = [];\r\n                }\r\n                if (void 0 !== target) {\r\n                    listener.target = target;\r\n                }\r\n                this.listenersMap[name].push(listener);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (eventNames_1_1 && !eventNames_1_1.done && (_b = eventNames_1.return)) _b.call(eventNames_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    default_1.prototype.off = function (eventName, listener) {\r\n        var listeners = this.listenersMap[eventName];\r\n        if (void 0 !== listeners) {\r\n            if (void 0 === listener) {\r\n                delete this.listenersMap[eventName];\r\n            }\r\n            else {\r\n                var index = listeners.findIndex(function (fn) { return fn === listener; });\r\n                listeners.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.emit = function (eventName, payload, beforeHook) {\r\n        var e_2, _a;\r\n        if (beforeHook === void 0) { beforeHook = function () { return true; }; }\r\n        var listeners = this.listenersMap[eventName];\r\n        if (void 0 !== listeners && 0 < listeners.length) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    var target = listener.target;\r\n                    if (beforeHook({ target: target })) {\r\n                        listener(payload);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.destroy = function () {\r\n        this.listenersMap = {};\r\n    };\r\n    return default_1;\r\n}());\n\nexport default default_1;\n","var ObjectToString = Object.prototype.toString;\r\nfunction isRegExp(input) {\r\n    return '[object RegExp]' === ObjectToString.call(input);\r\n}\r\nfunction isFunction(input) {\r\n    return '[object Function]' === ObjectToString.call(input);\r\n}\n\nvar CLIENT_X = 'clientX';\r\nvar CLIENT_Y = 'clientY';\r\nvar COMPUTE_INTERVAL = 16;\r\nvar INPUT_START = 'start';\r\nvar INPUT_MOVE = 'move';\r\nvar INPUT_CANCEL = 'cancel';\r\nvar INPUT_END = 'end';\r\nvar DIRECTION_LEFT = 'left';\r\nvar DIRECTION_RIGHT = 'right';\r\nvar DIRECTION_UP = 'up';\r\nvar DIRECTION_DOWN = 'down';\r\nvar NONE = 'none';\r\nvar TOUCH = 'touch';\r\nvar MOUSE = 'mouse';\r\nvar TOUCH_START = TOUCH + INPUT_START;\r\nvar TOUCH_MOVE = TOUCH + INPUT_MOVE;\r\nvar TOUCH_END = TOUCH + INPUT_END;\r\nvar TOUCH_CANCEL = TOUCH + INPUT_CANCEL;\r\nvar MOUSE_UP = MOUSE + DIRECTION_UP;\r\nvar MOUSE_MOVE = MOUSE + INPUT_MOVE;\r\nvar MOUSE_DOWN = MOUSE + DIRECTION_DOWN;\r\nvar SUPPORT_TOUCH = window.wx || \"on\" + TOUCH_START in window;\r\nvar STATUS_POSSIBLE = 'p';\r\nvar STATUS_START = INPUT_START;\r\nvar STATUS_MOVE = INPUT_MOVE;\r\nvar STATUS_END = INPUT_END;\r\nvar STATUS_RECOGNIZED = 'r';\r\nvar STATUS_FAILED = 'f';\r\nvar STATUS_CANCELLED = INPUT_CANCEL;\n\nfunction round2(n) {\r\n    return Math.round(n * 100) / 100;\r\n}\n\nexport { CLIENT_X, CLIENT_Y, COMPUTE_INTERVAL, DIRECTION_DOWN, DIRECTION_LEFT, DIRECTION_RIGHT, DIRECTION_UP, INPUT_CANCEL, INPUT_END, INPUT_MOVE, INPUT_START, MOUSE, MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, NONE, STATUS_CANCELLED, STATUS_END, STATUS_FAILED, STATUS_MOVE, STATUS_POSSIBLE, STATUS_RECOGNIZED, STATUS_START, SUPPORT_TOUCH, TOUCH, TOUCH_CANCEL, TOUCH_END, TOUCH_MOVE, TOUCH_START, isFunction, isRegExp, round2 };\n","import { __extends, __assign, __rest, __values, __read } from 'tslib';\nimport AnyEvent from 'any-event';\nimport { MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, INPUT_START, INPUT_MOVE, INPUT_END, INPUT_CANCEL, SUPPORT_TOUCH, CLIENT_X, CLIENT_Y, isRegExp, isFunction, TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL, TOUCH } from '@any-touch/shared';\n\nvar default_1 = (function () {\r\n    function default_1() {\r\n    }\r\n    return default_1;\r\n}());\n\nvar default_1$1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    default_1.prototype.load = function (event, el) {\r\n        var targets = [];\r\n        var points = [];\r\n        Array.from(event.touches).forEach(function (_a) {\r\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\r\n            if (el === null || el === void 0 ? void 0 : el.contains(target)) {\r\n                targets.push(target);\r\n                points.push({ clientX: clientX, clientY: clientY, target: target });\r\n            }\r\n        });\r\n        var changedPoints = Array.from(event.changedTouches).map(function (_a) {\r\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\r\n            return ({ clientX: clientX, clientY: clientY, target: target });\r\n        });\r\n        return {\r\n            inputType: event.type.replace('touch', ''),\r\n            changedPoints: changedPoints,\r\n            points: points,\r\n            nativeEvent: event,\r\n            target: event.target,\r\n            targets: targets\r\n        };\r\n    };\r\n    return default_1;\r\n}(default_1));\n\nvar default_1$2 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1() {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = null;\r\n        _this.isPressed = false;\r\n        return _this;\r\n    }\r\n    default_1.prototype.load = function (event) {\r\n        var clientX = event.clientX, clientY = event.clientY, type = event.type, button = event.button, target = event.target;\r\n        var points = [{ clientX: clientX, clientY: clientY, target: target }];\r\n        var inputType;\r\n        if (MOUSE_DOWN === type && 0 === button) {\r\n            this.target = target;\r\n            this.isPressed = true;\r\n            inputType = INPUT_START;\r\n        }\r\n        else if (this.isPressed) {\r\n            if (MOUSE_MOVE === type) {\r\n                inputType = INPUT_MOVE;\r\n            }\r\n            else if (MOUSE_UP === type) {\r\n                points = [];\r\n                inputType = INPUT_END;\r\n                this.isPressed = false;\r\n            }\r\n        }\r\n        var changedPoints = this.prevPoints || [{ clientX: clientX, clientY: clientY, target: target }];\r\n        this.prevPoints = [{ clientX: clientX, clientY: clientY, target: target }];\r\n        if (void 0 !== inputType) {\r\n            return {\r\n                inputType: inputType,\r\n                changedPoints: changedPoints,\r\n                points: points,\r\n                target: this.target,\r\n                targets: [this.target],\r\n                nativeEvent: event\r\n            };\r\n        }\r\n    };\r\n    return default_1;\r\n}(default_1));\n\nvar default_1$3 = (function () {\r\n    function default_1(el) {\r\n        var Input = SUPPORT_TOUCH ? default_1$1 : default_1$2;\r\n        this.adapter = new Input();\r\n        this.id = 0;\r\n        this.el = el;\r\n    }\r\n    default_1.prototype.transform = function (event) {\r\n        this.prevInput = this.activeInput;\r\n        var baseInputWithoutId = this.adapter.load(event, this.el);\r\n        if (void 0 !== baseInputWithoutId) {\r\n            var id = Number.MAX_SAFE_INTEGER > this.id ? ++this.id : 1;\r\n            var baseInput = __assign(__assign({}, baseInputWithoutId), { id: id });\r\n            var pureInput = extendInput(baseInput);\r\n            this.activeInput = pureInput;\r\n            var isStart = pureInput.isStart, pointLength = pureInput.pointLength;\r\n            if (isStart) {\r\n                this.startInput = pureInput;\r\n                this.prevInput = void 0;\r\n                if (1 < pointLength) {\r\n                    this.startMultiInput = pureInput;\r\n                }\r\n                else {\r\n                    this.startMultiInput = void 0;\r\n                }\r\n            }\r\n            return __assign(__assign({}, pureInput), { prevInput: this.prevInput, startMultiInput: this.startMultiInput, startInput: this.startInput });\r\n        }\r\n    };\r\n    return default_1;\r\n}());\r\nfunction getCenter(points) {\r\n    var length = points.length;\r\n    if (0 < length) {\r\n        if (1 === length) {\r\n            var _a = points[0], clientX = _a.clientX, clientY = _a.clientY;\r\n            return { x: Math.round(clientX), y: Math.round(clientY) };\r\n        }\r\n        var countPoint = points.reduce(function (countPoint, point) {\r\n            countPoint.x += point[CLIENT_X];\r\n            countPoint.y += point[CLIENT_Y];\r\n            return countPoint;\r\n        }, { x: 0, y: 0 });\r\n        return { x: Math.round(countPoint.x / length), y: Math.round(countPoint.y / length) };\r\n    }\r\n}\r\nfunction extendInput(inputBase) {\r\n    var inputType = inputBase.inputType, points = inputBase.points, changedPoints = inputBase.changedPoints, nativeEvent = inputBase.nativeEvent;\r\n    var pointLength = points.length;\r\n    var isStart = INPUT_START === inputType;\r\n    var isEnd = (INPUT_END === inputType && 0 === pointLength) || INPUT_CANCEL === inputType;\r\n    var timestamp = performance.now();\r\n    var _a = getCenter(points) || getCenter(changedPoints), x = _a.x, y = _a.y;\r\n    var currentTarget = nativeEvent.currentTarget;\r\n    return __assign(__assign({}, inputBase), { x: x, y: y,\r\n        timestamp: timestamp,\r\n        isStart: isStart, isEnd: isEnd,\r\n        pointLength: pointLength,\r\n        currentTarget: currentTarget,\r\n        getOffset: function (el) {\r\n            if (el === void 0) { el = currentTarget; }\r\n            var rect = el.getBoundingClientRect();\r\n            return { x: x - Math.round(rect.left), y: y - Math.round(rect.top) };\r\n        } });\r\n}\n\nfunction dispatchDomEvent (el, payload, eventInit) {\r\n    var target = payload.target, currentTarget = payload.currentTarget, type = payload.type, data = __rest(payload, [\"target\", \"currentTarget\", \"type\"]);\r\n    var event;\r\n    if (document.createEvent) {\r\n        event = document.createEvent('HTMLEvents');\r\n        event.initEvent(type, eventInit === null || eventInit === void 0 ? void 0 : eventInit.bubbles, eventInit === null || eventInit === void 0 ? void 0 : eventInit.cancelable);\r\n    }\r\n    else {\r\n        event = new Event(type, eventInit);\r\n    }\r\n    Object.assign(event, data, {\r\n        match: function () {\r\n            return payload.targets.every(function (target) {\r\n                return event.currentTarget.contains(target);\r\n            });\r\n        }\r\n    });\r\n    return el.dispatchEvent(event);\r\n}\n\nfunction canPreventDefault (event, options) {\r\n    if (!options.isPreventDefault)\r\n        return false;\r\n    var isPreventDefault = true;\r\n    if (null !== event.target) {\r\n        var preventDefaultExclude = options.preventDefaultExclude;\r\n        if (isRegExp(preventDefaultExclude)) {\r\n            if ('tagName' in event.target) {\r\n                var tagName = event.target.tagName;\r\n                isPreventDefault = !preventDefaultExclude.test(tagName);\r\n            }\r\n        }\r\n        else if (isFunction(preventDefaultExclude)) {\r\n            isPreventDefault = !preventDefaultExclude(event);\r\n        }\r\n    }\r\n    return isPreventDefault;\r\n}\n\nvar TOUCH_EVENT_NAMES = [TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL];\r\nfunction bindElement (el, callback, options, device) {\r\n    if (SUPPORT_TOUCH || 'Touch' === device) {\r\n        TOUCH_EVENT_NAMES.forEach(function (eventName) {\r\n            el.addEventListener(eventName, callback, options);\r\n        });\r\n        return function () {\r\n            TOUCH_EVENT_NAMES.forEach(function (eventName) {\r\n                el.removeEventListener(eventName, callback);\r\n            });\r\n        };\r\n    }\r\n    else {\r\n        el.addEventListener(MOUSE_DOWN, callback, options);\r\n        window.addEventListener(MOUSE_MOVE, callback, options);\r\n        window.addEventListener(MOUSE_UP, callback, options);\r\n        return function () {\r\n            el.removeEventListener(MOUSE_DOWN, callback);\r\n            window.removeEventListener(MOUSE_MOVE, callback);\r\n            window.removeEventListener(MOUSE_UP, callback);\r\n        };\r\n    }\r\n}\n\nfunction use(instanceOrClass, Recognizer, options) {\r\n    var name = options === null || options === void 0 ? void 0 : options.name;\r\n    if (void 0 !== name && void 0 !== instanceOrClass.recognizerMap[name])\r\n        return;\r\n    var instance = new Recognizer(options);\r\n    instanceOrClass.recognizerMap[instance.name] = instance;\r\n    instance.recognizerMap = instanceOrClass.recognizerMap;\r\n    instanceOrClass.recognizers.push(instanceOrClass.recognizerMap[instance.name]);\r\n}\r\nfunction removeUse(instanceOrClass, recognizerName) {\r\n    var e_1, _a;\r\n    if (void 0 === recognizerName) {\r\n        instanceOrClass.recognizers = [];\r\n        instanceOrClass.recognizerMap = {};\r\n    }\r\n    else {\r\n        try {\r\n            for (var _b = __values(instanceOrClass.recognizers.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var _d = __read(_c.value, 2), index = _d[0], recognizer = _d[1];\r\n                if (recognizerName === recognizer.options.name) {\r\n                    instanceOrClass.recognizers.splice(index, 1);\r\n                    delete instanceOrClass.recognizerMap[recognizerName];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n}\n\nvar AT_AFTER = 'at:after';\r\nfunction emit2(at, payload) {\r\n    var type = payload.type, target = payload.target, targets = payload.targets;\r\n    at.emit(type, payload, function (data) {\r\n        if (void 0 !== (data === null || data === void 0 ? void 0 : data.target)) {\r\n            var currentTarget_1 = data.target;\r\n            return targets.every(function (target) { return currentTarget_1.contains(target); });\r\n        }\r\n        return true;\r\n    });\r\n    at.emit(AT_AFTER, payload);\r\n    if (!!at.options.domEvents\r\n        && void 0 !== at.el\r\n        && null !== target) {\r\n        dispatchDomEvent(target, payload, at.options.domEvents);\r\n        dispatchDomEvent(target, __assign(__assign({}, payload), { _type: payload.type, type: AT_AFTER }), at.options.domEvents);\r\n    }\r\n}\n\nvar DEFAULT_OPTIONS = {\r\n    domEvents: { bubbles: true, cancelable: true },\r\n    isPreventDefault: true,\r\n    preventDefaultExclude: /^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/\r\n};\r\nvar AnyTouch = (function (_super) {\r\n    __extends(AnyTouch, _super);\r\n    function AnyTouch(el, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.recognizerMap = {};\r\n        _this.recognizers = [];\r\n        _this.cacheComputedFunctionGroup = Object.create(null);\r\n        _this.el = el;\r\n        _this.input = new default_1$3(el);\r\n        _this.options = __assign(__assign({}, DEFAULT_OPTIONS), options);\r\n        _this.recognizerMap = AnyTouch.recognizerMap;\r\n        _this.recognizers = AnyTouch.recognizers;\r\n        if (void 0 !== el) {\r\n            el.style.webkitTapHighlightColor = 'rgba(0,0,0,0)';\r\n            var supportsPassive_1 = false;\r\n            try {\r\n                var opts = {};\r\n                Object.defineProperty(opts, 'passive', ({\r\n                    get: function () {\r\n                        supportsPassive_1 = true;\r\n                    }\r\n                }));\r\n                window.addEventListener('_', function () { return void 0; }, opts);\r\n            }\r\n            catch (_a) { }\r\n            _this.on('unbind', bindElement(el, _this.catchEvent.bind(_this), !_this.options.isPreventDefault && supportsPassive_1 ? { passive: true } : false, _this.options.device));\r\n        }\r\n        return _this;\r\n    }\r\n    AnyTouch.prototype.use = function (Recognizer, options) {\r\n        use(this, Recognizer, options);\r\n    };\r\n    AnyTouch.prototype.removeUse = function (name) {\r\n        removeUse(this, name);\r\n    };\r\n    AnyTouch.prototype.catchEvent = function (event) {\r\n        var e_1, _a;\r\n        var _this = this;\r\n        if (canPreventDefault(event, this.options)) {\r\n            event.preventDefault();\r\n        }\r\n        var input = this.input.transform(event);\r\n        if (void 0 !== input) {\r\n            var AT_TOUCH = \"at:\" + TOUCH;\r\n            var AT_TOUCH_WITH_STATUS = AT_TOUCH + input.inputType;\r\n            this.emit(AT_TOUCH, input);\r\n            this.emit(AT_TOUCH_WITH_STATUS, input);\r\n            var domEvents = this.options.domEvents;\r\n            if (false !== domEvents) {\r\n                var target = event.target;\r\n                if (null !== target) {\r\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH }), domEvents);\r\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH_WITH_STATUS }), domEvents);\r\n                }\r\n            }\r\n            var cacheComputedGroup = Object.create(null);\r\n            var _loop_1 = function (recognizer) {\r\n                if (recognizer.disabled)\r\n                    return \"continue\";\r\n                recognizer.computedGroup = cacheComputedGroup;\r\n                recognizer.computeFunctionMap = this_1.cacheComputedFunctionGroup;\r\n                recognizer.recognize(input, function (type, ev) {\r\n                    var payload = __assign(__assign(__assign({}, input), ev), { type: type, baseType: recognizer.name });\r\n                    Object.freeze(payload);\r\n                    if (void 0 === _this.beforeEachHook) {\r\n                        emit2(_this, payload);\r\n                    }\r\n                    else {\r\n                        _this.beforeEachHook(recognizer, function () {\r\n                            emit2(_this, payload);\r\n                        });\r\n                    }\r\n                });\r\n                cacheComputedGroup = recognizer.computedGroup;\r\n                this_1.cacheComputedFunctionGroup = recognizer.computeFunctionMap;\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _b = __values(this.recognizers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var recognizer = _c.value;\r\n                    _loop_1(recognizer);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n    };\r\n    AnyTouch.prototype.beforeEach = function (hook) {\r\n        this.beforeEachHook = hook;\r\n    };\r\n    AnyTouch.prototype.get = function (name) {\r\n        return this.recognizerMap[name];\r\n    };\r\n    AnyTouch.prototype.set = function (options) {\r\n        this.options = __assign(__assign({}, this.options), options);\r\n    };\r\n    AnyTouch.prototype.destroy = function () {\r\n        this.emit('unbind');\r\n        this.listenersMap = {};\r\n    };\r\n    AnyTouch.version = '0.7.7';\r\n    AnyTouch.recognizers = [];\r\n    AnyTouch.recognizerMap = {};\r\n    AnyTouch.use = function (Recognizer, options) {\r\n        use(AnyTouch, Recognizer, options);\r\n    };\r\n    AnyTouch.removeUse = function (recognizerName) {\r\n        removeUse(AnyTouch, recognizerName);\r\n    };\r\n    return AnyTouch;\r\n}(AnyEvent));\n\nexport default AnyTouch;\n","import { __assign, __values } from 'tslib';\nimport { STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED, STATUS_POSSIBLE, STATUS_START, STATUS_MOVE, INPUT_MOVE, INPUT_END, INPUT_CANCEL, INPUT_START } from '@any-touch/shared';\n\nfunction resetStatus (recognizer) {\r\n    if (-1 !== [STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED].indexOf(recognizer.status)) {\r\n        recognizer.status = STATUS_POSSIBLE;\r\n    }\r\n}\n\nfunction flow(isVaild, activeStatus, inputType) {\r\n    var _a, _b, _c, _d, _e, _f, _g;\r\n    var STATE_MAP = {\r\n        1: (_a = {},\r\n            _a[STATUS_POSSIBLE] = (_b = {},\r\n                _b[INPUT_MOVE] = STATUS_START,\r\n                _b),\r\n            _a[STATUS_START] = (_c = {},\r\n                _c[INPUT_MOVE] = STATUS_MOVE,\r\n                _c[INPUT_END] = STATUS_END,\r\n                _c[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _c),\r\n            _a[STATUS_MOVE] = (_d = {},\r\n                _d[INPUT_MOVE] = STATUS_MOVE,\r\n                _d[INPUT_END] = STATUS_END,\r\n                _d[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _d),\r\n            _a),\r\n        0: (_e = {},\r\n            _e[STATUS_START] = (_f = {},\r\n                _f[INPUT_MOVE] = STATUS_CANCELLED,\r\n                _f[INPUT_END] = STATUS_END,\r\n                _f[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _f),\r\n            _e[STATUS_MOVE] = (_g = {},\r\n                _g[INPUT_START] = STATUS_FAILED,\r\n                _g[INPUT_MOVE] = STATUS_CANCELLED,\r\n                _g[INPUT_END] = STATUS_END,\r\n                _g[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _g),\r\n            _e)\r\n    };\r\n    if (void 0 !== STATE_MAP[Number(isVaild)][activeStatus]) {\r\n        return STATE_MAP[Number(isVaild)][activeStatus][inputType] || activeStatus;\r\n    }\r\n    else {\r\n        return activeStatus;\r\n    }\r\n}\r\nfunction recognizeForPressMoveLike (recognizer, input, emit) {\r\n    var isVaild = recognizer.test(input);\r\n    resetStatus(recognizer);\r\n    var inputType = input.inputType;\r\n    recognizer.status = flow(isVaild, recognizer.status, inputType);\r\n    var computed = recognizer.computed;\r\n    recognizer.isRecognized = [STATUS_START, STATUS_MOVE].includes(recognizer.status);\r\n    var name = recognizer.name, status = recognizer.status, isRecognized = recognizer.isRecognized;\r\n    if (isRecognized) {\r\n        emit(name, computed);\r\n    }\r\n    if (isRecognized || [STATUS_END, STATUS_CANCELLED].includes(recognizer.status)) {\r\n        emit(name + status, computed);\r\n    }\r\n    return isVaild;\r\n}\n\nvar default_1 = (function () {\r\n    function default_1(options) {\r\n        this.disabled = false;\r\n        this.status = STATUS_POSSIBLE;\r\n        this.isRecognized = false;\r\n        this.recognizerMap = {};\r\n        this.computedGroup = {};\r\n        this.computed = {};\r\n        this.computeFunctionMap = {};\r\n        this.options = options;\r\n        this.name = this.options.name;\r\n    }\r\n    default_1.prototype.set = function (options) {\r\n        if (void 0 !== options) {\r\n            this.options = __assign(__assign({}, this.options), options);\r\n        }\r\n        return this;\r\n    };\r\n    default_1.prototype.isValidPointLength = function (pointLength) {\r\n        return 0 === this.options.pointLength || this.options.pointLength === pointLength;\r\n    };\r\n    default_1.prototype.compute = function (Cs, input) {\r\n        var e_1, _a;\r\n        var computed = Object.create(null);\r\n        try {\r\n            for (var Cs_1 = __values(Cs), Cs_1_1 = Cs_1.next(); !Cs_1_1.done; Cs_1_1 = Cs_1.next()) {\r\n                var C = Cs_1_1.value;\r\n                var _id = C._id;\r\n                var _b = this, computedGroup = _b.computedGroup, computeFunctionMap = _b.computeFunctionMap;\r\n                if (void 0 === computeFunctionMap[_id]) {\r\n                    computeFunctionMap[_id] = C();\r\n                }\r\n                computedGroup[_id] = computedGroup[_id] || computeFunctionMap[_id](input);\r\n                for (var key in computedGroup[_id]) {\r\n                    computed[key] = computedGroup[_id][key];\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (Cs_1_1 && !Cs_1_1.done && (_a = Cs_1.return)) _a.call(Cs_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return computed;\r\n    };\r\n    return default_1;\r\n}());\n\nexport default default_1;\nexport { recognizeForPressMoveLike, resetStatus as resetStatusForPressMoveLike };\n","import { NONE, DIRECTION_RIGHT, DIRECTION_LEFT, DIRECTION_DOWN, DIRECTION_UP } from '@any-touch/shared';\n\nvar getVLength = (function (v) {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y);\r\n});\n\nvar getDotProduct = (function (v1, v2) {\r\n    return v1.x * v2.x + v1.y * v2.y;\r\n});\n\nvar getRadian = (function (v1, v2) {\r\n    var mr = getVLength(v1) * getVLength(v2);\r\n    if (mr === 0)\r\n        return 0;\r\n    var r = getDotProduct(v1, v2) / mr;\r\n    if (r > 1)\r\n        r = 1;\r\n    return Math.acos(r);\r\n});\n\nvar getCross = (function (v1, v2) {\r\n    return v1.x * v2.y - v2.x * v1.y;\r\n});\n\nvar radianToAngle = (function (radian) { return radian / Math.PI * 180; });\n\nvar getAngle = (function (v1, v2) {\r\n    var angle = getRadian(v1, v2);\r\n    if (getCross(v1, v2) > 0) {\r\n        angle *= -1;\r\n    }\r\n    return radianToAngle(angle);\r\n});\n\nvar getDirection = (function (x, y) {\r\n    if (x === y) {\r\n        return NONE;\r\n    }\r\n    else if (Math.abs(x) > Math.abs(y)) {\r\n        return 0 < x ? DIRECTION_RIGHT : DIRECTION_LEFT;\r\n    }\r\n    else {\r\n        return 0 < y ? DIRECTION_DOWN : DIRECTION_UP;\r\n    }\r\n});\n\nexport { getAngle, getCross, getDirection, getDotProduct, getRadian, getVLength, radianToAngle };\n","import { getAngle, radianToAngle, getVLength, getDirection } from '@any-touch/vector';\nimport { INPUT_START, INPUT_MOVE, CLIENT_X, CLIENT_Y, NONE, round2, COMPUTE_INTERVAL } from '@any-touch/shared';\n\nfunction computeAngle (_a) {\r\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\r\n    var deltaAngle = Math.round(getAngle(activeV, prevV));\r\n    var angle = Math.round(getAngle(activeV, startV));\r\n    return { angle: angle, deltaAngle: deltaAngle };\r\n}\n\nfunction ComputeDeltaXY() {\r\n    return function (input) {\r\n        var prevInput = input.prevInput;\r\n        var deltaX = 0;\r\n        var deltaY = 0;\r\n        var deltaXYAngle = 0;\r\n        if (void 0 !== prevInput) {\r\n            deltaX = input.x - prevInput.x;\r\n            deltaY = input.y - prevInput.y;\r\n            if (0 !== deltaX || 0 !== deltaY) {\r\n                var deltaXY = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n                deltaXYAngle = Math.round(radianToAngle(Math.acos(Math.abs(deltaX) / deltaXY)));\r\n            }\r\n        }\r\n        return { deltaX: deltaX, deltaY: deltaY, deltaXYAngle: deltaXYAngle };\r\n    };\r\n}\r\nComputeDeltaXY._id = \"ComputeDeltaXY\";\n\nfunction computeDistance() {\r\n    var displacementX = 0;\r\n    var displacementY = 0;\r\n    var distanceX = 0;\r\n    var distanceY = 0;\r\n    var distance = 0;\r\n    var overallDirection = NONE;\r\n    return function (input) {\r\n        var inputType = input.inputType, startInput = input.startInput;\r\n        if (INPUT_START === inputType) {\r\n            displacementX = 0;\r\n            displacementY = 0;\r\n            distanceX = 0;\r\n            distanceY = 0;\r\n            distance = 0;\r\n            overallDirection = NONE;\r\n        }\r\n        else if (INPUT_MOVE === inputType) {\r\n            displacementX = Math.round(input.points[0][CLIENT_X] - startInput.points[0][CLIENT_X]);\r\n            displacementY = Math.round(input.points[0][CLIENT_Y] - startInput.points[0][CLIENT_Y]);\r\n            distanceX = Math.abs(displacementX);\r\n            distanceY = Math.abs(displacementY);\r\n            distance = Math.round(getVLength({ x: distanceX, y: distanceY }));\r\n            overallDirection = getDirection(displacementX, displacementY);\r\n        }\r\n        return {\r\n            displacementX: displacementX, displacementY: displacementY, distanceX: distanceX, distanceY: distanceY, distance: distance, overallDirection: overallDirection\r\n        };\r\n    };\r\n}\r\ncomputeDistance._id = \"computeDistance\";\n\nfunction computeMaxLength() {\r\n    var maxPointLength = 0;\r\n    return function (input) {\r\n        var inputType = input.inputType;\r\n        if (INPUT_START === inputType) {\r\n            maxPointLength = input.pointLength;\r\n        }\r\n        return { maxPointLength: maxPointLength };\r\n    };\r\n}\r\ncomputeMaxLength._id = \"computeMaxLength\";\n\nfunction computeScale(_a) {\r\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\r\n    var deltaScale = round2(getVLength(activeV) / getVLength(prevV));\r\n    var scale = round2(getVLength(activeV) / getVLength(startV));\r\n    return { scale: scale, deltaScale: deltaScale };\r\n}\n\nfunction ComputeVAndDir() {\r\n    var velocityX = 0;\r\n    var velocityY = 0;\r\n    var speedX = 0;\r\n    var speedY = 0;\r\n    var direction;\r\n    var _lastValidInput;\r\n    return function (input) {\r\n        if (void 0 !== input) {\r\n            var inputType = input.inputType;\r\n            _lastValidInput = _lastValidInput || input.startInput;\r\n            var deltaTime = input.timestamp - _lastValidInput.timestamp;\r\n            if (INPUT_MOVE === inputType && COMPUTE_INTERVAL < deltaTime) {\r\n                var deltaX = input.x - _lastValidInput.x;\r\n                var deltaY = input.y - _lastValidInput.y;\r\n                speedX = Math.round(deltaX / deltaTime * 100) / 100;\r\n                speedY = Math.round(deltaY / deltaTime * 100) / 100;\r\n                velocityX = Math.abs(speedX);\r\n                velocityY = Math.abs(speedY);\r\n                direction = getDirection(deltaX, deltaY) || (direction);\r\n                _lastValidInput = input;\r\n            }\r\n        }\r\n        return { velocityX: velocityX, velocityY: velocityY, speedX: speedX, speedY: speedY, direction: direction };\r\n    };\r\n}\r\nComputeVAndDir._id = \"ComputeVAndDir\";\n\nfunction computeVector(input) {\r\n    return {\r\n        x: input.points[1][CLIENT_X] - input.points[0][CLIENT_X],\r\n        y: input.points[1][CLIENT_Y] - input.points[0][CLIENT_Y]\r\n    };\r\n}\n\nfunction ComputeVectorForMutli() {\r\n    return function (input) {\r\n        var prevInput = input.prevInput, startMultiInput = input.startMultiInput;\r\n        if (void 0 !== startMultiInput &&\r\n            void 0 !== prevInput &&\r\n            input.id !== startMultiInput.id &&\r\n            1 < prevInput.pointLength &&\r\n            1 < input.pointLength) {\r\n            return {\r\n                startV: computeVector(startMultiInput),\r\n                prevV: computeVector(prevInput),\r\n                activeV: computeVector(input)\r\n            };\r\n        }\r\n    };\r\n}\r\nComputeVectorForMutli._id = \"ComputeVectorForMutli\";\n\nexport { ComputeDeltaXY, computeDistance as ComputeDistance, computeMaxLength as ComputeMaxLength, ComputeVAndDir, ComputeVectorForMutli, computeAngle, computeScale, computeVector };\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_END, STATUS_POSSIBLE, STATUS_RECOGNIZED, STATUS_FAILED } from '@any-touch/shared';\nimport Recognizer from '@any-touch/recognizer';\nimport { getVLength } from '@any-touch/vector';\nimport { ComputeMaxLength, ComputeDistance } from '@any-touch/compute';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'tap',\r\n    pointLength: 1,\r\n    tapTimes: 1,\r\n    waitNextTapTime: 300,\r\n    maxDistance: 2,\r\n    maxDistanceFromPrevTap: 9,\r\n    maxPressTime: 250,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        var _this = _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n        _this.tapCount = 0;\r\n        return _this;\r\n    }\r\n    default_1.prototype._isValidDistanceFromPrevTap = function (center) {\r\n        if (void 0 !== this.prevTapPoint) {\r\n            var distanceFromPreviousTap = getVLength({ x: center.x - this.prevTapPoint.x, y: center.y - this.prevTapPoint.y });\r\n            this.prevTapPoint = center;\r\n            return this.options.maxDistanceFromPrevTap >= distanceFromPreviousTap;\r\n        }\r\n        else {\r\n            this.prevTapPoint = center;\r\n            return true;\r\n        }\r\n    };\r\n    default_1.prototype._isValidInterval = function () {\r\n        var now = performance.now();\r\n        if (void 0 === this.prevTapTime) {\r\n            this.prevTapTime = now;\r\n            return true;\r\n        }\r\n        else {\r\n            var interval = now - this.prevTapTime;\r\n            this.prevTapTime = now;\r\n            return interval < this.options.waitNextTapTime;\r\n        }\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var inputType = input.inputType, x = input.x, y = input.y;\r\n        this.computed = this.compute([ComputeMaxLength, ComputeDistance], input);\r\n        if (INPUT_END !== inputType)\r\n            return;\r\n        this.status = STATUS_POSSIBLE;\r\n        if (this.test(input)) {\r\n            this.cancelCountDownToFail();\r\n            if (this._isValidDistanceFromPrevTap({ x: x, y: y }) && this._isValidInterval()) {\r\n                this.tapCount++;\r\n            }\r\n            else {\r\n                this.tapCount = 1;\r\n            }\r\n            if (0 === this.tapCount % this.options.tapTimes) {\r\n                this.status = STATUS_RECOGNIZED;\r\n                emit(this.options.name, __assign(__assign({}, this.computed), { tapCount: this.tapCount }));\r\n                this.reset();\r\n            }\r\n            else {\r\n                this.countDownToFail();\r\n            }\r\n        }\r\n        else {\r\n            this.reset();\r\n            this.status = STATUS_FAILED;\r\n        }\r\n    };\r\n    default_1.prototype.countDownToFail = function () {\r\n        var _this = this;\r\n        this._countDownToFailTimer = setTimeout(function () {\r\n            _this.status = STATUS_FAILED;\r\n            _this.reset();\r\n        }, this.options.waitNextTapTime);\r\n    };\r\n    default_1.prototype.cancelCountDownToFail = function () {\r\n        clearTimeout(this._countDownToFailTimer);\r\n    };\r\n    default_1.prototype.reset = function () {\r\n        this.tapCount = 0;\r\n        this.prevTapPoint = void 0;\r\n        this.prevTapTime = void 0;\r\n    };\r\n    default_1.prototype.test = function (input) {\r\n        var startInput = input.startInput, pointLength = input.pointLength;\r\n        var deltaTime = input.timestamp - startInput.timestamp;\r\n        var _a = this.computed, maxPointLength = _a.maxPointLength, distance = _a.distance;\r\n        return maxPointLength === this.options.pointLength &&\r\n            0 === pointLength &&\r\n            this.options.maxDistance >= distance &&\r\n            this.options.maxPressTime > deltaTime;\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVAndDir, ComputeDistance, ComputeDeltaXY } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'pan',\r\n    threshold: 10,\r\n    pointLength: 1\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var distance = this.computed.distance;\r\n        return ((this.isRecognized || this.options.threshold <= distance) &&\r\n            this.isValidPointLength(pointLength));\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        this.computed = this.compute([ComputeVAndDir, ComputeDistance, ComputeDeltaXY], input);\r\n        var isRecognized = void 0 !== this.computed.direction && recognizeForPressMoveLike(this, input, emit);\r\n        if (isRecognized) {\r\n            emit(this.options.name + this.computed.direction, this.computed);\r\n        }\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_END } from '@any-touch/shared';\nimport { ComputeMaxLength, ComputeVAndDir, ComputeDistance } from '@any-touch/compute';\nimport Recognizer from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'swipe',\r\n    threshold: 10,\r\n    velocity: 0.3,\r\n    pointLength: 1,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var inputType = input.inputType;\r\n        if (INPUT_END !== inputType)\r\n            return false;\r\n        var _a = this.computed, velocityX = _a.velocityX, velocityY = _a.velocityY, maxPointLength = _a.maxPointLength, distance = _a.distance;\r\n        return this.options.pointLength === maxPointLength &&\r\n            this.options.threshold < distance &&\r\n            this.options.velocity < Math.max(velocityX, velocityY);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        this.computed = this.compute([ComputeMaxLength, ComputeVAndDir, ComputeDistance], input);\r\n        if (this.test(input)) {\r\n            emit(this.options.name, this.computed);\r\n            emit(this.options.name + this.computed.direction, this.computed);\r\n        }\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_START, STATUS_RECOGNIZED, INPUT_END, DIRECTION_UP, INPUT_CANCEL, STATUS_FAILED } from '@any-touch/shared';\nimport { ComputeDistance } from '@any-touch/compute';\nimport Recognizer, { resetStatusForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'press',\r\n    pointLength: 1,\r\n    maxDistance: 9,\r\n    minPressTime: 251,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var _this = this;\r\n        var inputType = input.inputType, startInput = input.startInput, pointLength = input.pointLength;\r\n        if (INPUT_START === inputType && this.isValidPointLength(pointLength)) {\r\n            resetStatusForPressMoveLike(this);\r\n            this.cancel();\r\n            this._timeoutId = setTimeout(function () {\r\n                _this.status = STATUS_RECOGNIZED;\r\n                emit(_this.options.name, input);\r\n            }, this.options.minPressTime);\r\n        }\r\n        else if (INPUT_END === inputType && STATUS_RECOGNIZED === this.status) {\r\n            emit(\"\" + this.options.name + DIRECTION_UP, this.computed);\r\n        }\r\n        else if (STATUS_RECOGNIZED !== this.status) {\r\n            var deltaTime = input.timestamp - startInput.timestamp;\r\n            if (!this.test(input) ||\r\n                (this.options.minPressTime > deltaTime && [INPUT_END, INPUT_CANCEL].includes(inputType))) {\r\n                this.cancel();\r\n                this.status = STATUS_FAILED;\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.test = function (input) {\r\n        this.computed = this.compute([ComputeDistance], input);\r\n        var distance = this.computed.distance;\r\n        return this.options.maxDistance > distance;\r\n    };\r\n    default_1.prototype.cancel = function () {\r\n        clearTimeout(this._timeoutId);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVectorForMutli, computeScale } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'pinch',\r\n    threshold: 0,\r\n    pointLength: 2,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var scale = this.computed.scale;\r\n        return this.isValidPointLength(pointLength)\r\n            && void 0 !== scale\r\n            && (this.options.threshold < Math.abs(scale - 1) || this.isRecognized);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var computed = this.compute([ComputeVectorForMutli], input);\r\n        if (\"activeV\" in computed) {\r\n            this.computed = __assign(__assign({}, this.computed), computeScale(computed));\r\n        }\r\n        recognizeForPressMoveLike(this, input, emit);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVectorForMutli, computeAngle } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'rotate',\r\n    threshold: 0,\r\n    pointLength: 2,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var angle = this.computed.angle;\r\n        return this.isValidPointLength(pointLength) && (this.options.threshold < Math.abs(angle) || this.isRecognized);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var computed = this.compute([ComputeVectorForMutli], input);\r\n        if (\"activeV\" in computed) {\r\n            this.computed = __assign(__assign({}, this.computed), computeAngle(computed));\r\n        }\r\n        recognizeForPressMoveLike(this, input, emit);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import AnyTouch from '@any-touch/core';\nimport Tap from '@any-touch/tap';\nimport Pan from '@any-touch/pan';\nimport Swipe from '@any-touch/swipe';\nimport Press from '@any-touch/press';\nimport Pinch from '@any-touch/pinch';\nimport Rotate from '@any-touch/rotate';\nimport { STATUS_POSSIBLE, STATUS_START, STATUS_MOVE, STATUS_END, STATUS_CANCELLED, STATUS_FAILED, STATUS_RECOGNIZED } from '@any-touch/shared';\n\nAnyTouch.use(Tap);\r\nAnyTouch.use(Pan);\r\nAnyTouch.use(Swipe);\r\nAnyTouch.use(Press);\r\nAnyTouch.use(Pinch);\r\nAnyTouch.use(Rotate);\r\nAnyTouch.Tap = Tap;\r\nAnyTouch.Pan = Pan;\r\nAnyTouch.Swipe = Swipe;\r\nAnyTouch.Press = Press;\r\nAnyTouch.Pinch = Pinch;\r\nAnyTouch.Rotate = Rotate;\r\nAnyTouch.STATUS_POSSIBLE = STATUS_POSSIBLE;\r\nAnyTouch.STATUS_START = STATUS_START;\r\nAnyTouch.STATUS_MOVE = STATUS_MOVE;\r\nAnyTouch.STATUS_END = STATUS_END;\r\nAnyTouch.STATUS_CANCELLED = STATUS_CANCELLED;\r\nAnyTouch.STATUS_FAILED = STATUS_FAILED;\r\nAnyTouch.STATUS_RECOGNIZED = STATUS_RECOGNIZED;\n\nexport default AnyTouch;\n","import { render } from \"./Crop.vue?vue&type=template&id=27770f16&scoped=true\"\nimport script from \"./Crop.vue?vue&type=script&lang=js\"\nexport * from \"./Crop.vue?vue&type=script&lang=js\"\n\nimport \"./Crop.vue?vue&type=style&index=0&id=27770f16&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-27770f16\"\n\nexport default script","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}