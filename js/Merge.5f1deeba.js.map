{"version":3,"sources":["webpack:///./src/views/Merge.vue?6c29","webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./src/views/Merge.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///../src/index.ts","webpack:///./src/views/Merge.config.js","webpack:///./src/components/Crop.vue","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///../node_modules/any-event/dist/index.es.js","webpack:///../node_modules/@any-touch/shared/dist/index.es.js","webpack:///../node_modules/@any-touch/core/dist/index.es.js","webpack:///../node_modules/@any-touch/recognizer/dist/index.es.js","webpack:///../node_modules/@any-touch/vector/dist/index.es.js","webpack:///../node_modules/@any-touch/compute/dist/index.es.js","webpack:///../node_modules/@any-touch/tap/dist/index.es.js","webpack:///../node_modules/@any-touch/pan/dist/index.es.js","webpack:///../node_modules/@any-touch/swipe/dist/index.es.js","webpack:///../node_modules/@any-touch/press/dist/index.es.js","webpack:///../node_modules/@any-touch/pinch/dist/index.es.js","webpack:///../node_modules/@any-touch/rotate/dist/index.es.js","webpack:///../node_modules/any-touch/dist/index.es.js","webpack:///./src/components/Crop.vue?5ff4","webpack:///./src/views/Merge.vue?ec95","webpack:///./src/components/Crop.vue?0bdb","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["this","b","a","autoBom","console","warn","test","type","Blob","c","d","e","XMLHttpRequest","open","responseType","onload","response","onerror","error","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","saveAs","HTMLAnchorElement","prototype","g","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","userAgent","FileReader","onloadend","result","replace","readAsDataURL","k","l","module","exports","class","ref","width","height","backgroundURLs","backgroundURL","key","src","changeBackground","save","imagesUploaded","onImageLoaded","style","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","normalCompletion","didErr","step","_e2","img_1","POS","x","y","w","onTap","onPanstart","onPanmove","onPanend","extendStatics","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","arguments","call","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","m","__read","r","ar","default_1","listenersMap","el","_this","on","eventName","listener","_a","e_1","_b","eventNames","eventNames_1","eventNames_1_1","e_1_1","return","off","listeners","index","findIndex","fn","splice","emit","payload","beforeHook","e_2","listeners_1","listeners_1_1","e_2_1","destroy","ObjectToString","toString","isRegExp","input","isFunction","CLIENT_X","CLIENT_Y","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_CANCEL","INPUT_END","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","NONE","TOUCH","MOUSE","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","MOUSE_UP","MOUSE_MOVE","MOUSE_DOWN","SUPPORT_TOUCH","wx","STATUS_POSSIBLE","STATUS_START","STATUS_MOVE","STATUS_END","STATUS_RECOGNIZED","STATUS_FAILED","STATUS_CANCELLED","round2","Math","round","default_1$1","_super","load","event","targets","points","from","touches","forEach","clientX","clientY","contains","changedPoints","changedTouches","map","inputType","nativeEvent","default_1$2","isPressed","button","prevPoints","default_1$3","Input","adapter","id","transform","prevInput","activeInput","baseInputWithoutId","Number","MAX_SAFE_INTEGER","baseInput","pureInput","extendInput","isStart","pointLength","startInput","startMultiInput","getCenter","countPoint","reduce","point","inputBase","isEnd","timestamp","performance","now","currentTarget","getOffset","rect","getBoundingClientRect","left","top","dispatchDomEvent","eventInit","data","initEvent","bubbles","cancelable","Event","match","every","canPreventDefault","options","isPreventDefault","preventDefaultExclude","tagName","TOUCH_EVENT_NAMES","bindElement","callback","device","addEventListener","removeEventListener","use","instanceOrClass","Recognizer","recognizerMap","instance","recognizers","removeUse","recognizerName","entries","_c","recognizer","AT_AFTER","emit2","at","currentTarget_1","domEvents","_type","DEFAULT_OPTIONS","AnyTouch","cacheComputedFunctionGroup","webkitTapHighlightColor","supportsPassive_1","opts","defineProperty","get","catchEvent","bind","passive","preventDefault","AT_TOUCH","AT_TOUCH_WITH_STATUS","cacheComputedGroup","_loop_1","disabled","computedGroup","computeFunctionMap","this_1","recognize","ev","baseType","freeze","beforeEachHook","beforeEach","hook","set","version","resetStatus","flow","isVaild","activeStatus","_f","_g","STATE_MAP","1","0","recognizeForPressMoveLike","computed","isRecognized","includes","isValidPointLength","compute","Cs","Cs_1","Cs_1_1","C","_id","getVLength","v","sqrt","getDotProduct","v1","v2","getRadian","mr","acos","getCross","radianToAngle","radian","PI","getAngle","angle","getDirection","abs","computeAngle","startV","prevV","activeV","deltaAngle","ComputeDeltaXY","deltaX","deltaY","deltaXYAngle","deltaXY","pow","computeDistance","displacementX","displacementY","distanceX","distanceY","distance","overallDirection","computeMaxLength","maxPointLength","computeScale","deltaScale","scale","ComputeVAndDir","direction","_lastValidInput","velocityX","velocityY","speedX","speedY","deltaTime","computeVector","ComputeVectorForMutli","tapTimes","waitNextTapTime","maxDistance","maxDistanceFromPrevTap","maxPressTime","tapCount","_isValidDistanceFromPrevTap","center","prevTapPoint","distanceFromPreviousTap","_isValidInterval","prevTapTime","interval","cancelCountDownToFail","reset","countDownToFail","_countDownToFailTimer","clearTimeout","threshold","velocity","max","minPressTime","cancel","_timeoutId","Tap","Pan","Swipe","Press","Pinch","Rotate","props","default","context","stack","mounted","$refs","getContext","drawImage","$el","methods","switchPointToCanvas","offsetWidth","rate","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","closePath","restore","fill","draw","drawCircle","arc","fillStyle","item","render","__scopeId","components","ButtonLoadFile","Crop","backgroundImage","canvas","toBlob","blob","url","source","img","clearRect","imageLength","toObject","toAbsoluteIndex","toLength","O","argumentsLength","end","endPos","$","addToUnscopables","proto"],"mappings":"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","file":"js/Merge.5f1deeba.js","sourcesContent":["export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Merge.vue?vue&type=style&index=0&scope=true&lang=scss\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Merge.vue?vue&type=style&index=0&scope=true&lang=scss\"","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","<template>\r\n    <article class=\"page-merge\">\r\n        <div class=\"page-merge__left\">\r\n            <div class=\"page-merge__left__content\">\r\n                <canvas ref=\"canvas\" :width=\"width\" :height=\"height\" />\r\n                <ul>\r\n                    <li v-for=\"backgroundURL in backgroundURLs\" :key=\"backgroundURL\">\r\n                        <img :src=\"backgroundURL\" @click=\"changeBackground(backgroundURL)\" />\r\n                    </li>\r\n                </ul>\r\n                <button class=\"a-button a-button--success a-button-save\" @click=\"save\">\r\n                    <i class=\"ion-md-image\" /> 保存\r\n                </button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"page-merge__middle\">\r\n            <ul>\r\n                <li class=\"img\" v-for=\"{src} in imagesUploaded\" :key=\"src\">\r\n                    <img :src=\"src\" />\r\n                </li>\r\n                <li>\r\n                    <ButtonLoadFile\r\n                        @loaded=\"onImageLoaded\"\r\n                        class=\"button-add p-0 a-button a-button--dark a-button--outline\"\r\n                    >\r\n                        <i class=\"ion-md-folder-open\" /> 打开\r\n                    </ButtonLoadFile>\r\n                </li>\r\n            </ul>\r\n            <Crop style=\"border:1px solid #ccc; width:600px;\"/>\r\n        </div>\r\n\r\n        <div class=\"page-merge__right\">\r\n\r\n            \r\n        </div>\r\n    </article>\r\n</template>\r\n<script>\r\nimport { saveAs } from 'file-saver';\r\nimport loadImage from '../../../packages/load-image/dist/index.es';\r\nimport ButtonLoadFile from './ButtonLoadFile';\r\nimport { POS } from './Merge.config';\r\nimport Crop from '../components/Crop';\r\nexport default {\r\n    name: 'Merge',\r\n\r\n    components: { ButtonLoadFile,Crop },\r\n\r\n    data() {\r\n        return {\r\n            width: 1300,\r\n            height: 5500,\r\n            context: null,\r\n            backgroundImage: null,\r\n            imagesUploaded: [],\r\n            backgroundURLs: [\r\n                'sock_bg/AFS32.png',\r\n                'https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/merchant-taking-sale-with-chip-and-swipe-reader.jpg?v=1593507608',\r\n            ],\r\n        };\r\n    },\r\n\r\n    async mounted() {\r\n        this.context = this.$refs.canvas.getContext('2d');\r\n        this.backgroundImage = await loadImage(this.backgroundURLs[0]);\r\n        this.context.drawImage(this.backgroundImage, 0, 0);\r\n    },\r\n\r\n    methods: {\r\n        save() {\r\n            this.$refs.canvas.toBlob(\r\n                function (blob) {\r\n                    saveAs(blob, 'merge.png');\r\n                },\r\n                'image/png',\r\n                1\r\n            );\r\n        },\r\n\r\n        async changeBackground(url) {\r\n            this.backgroundImage = await loadImage(url);\r\n            this.render();\r\n        },\r\n\r\n        onImageLoaded(data) {\r\n            for (const { source } of data) {\r\n                const { img } = source;\r\n                this.imagesUploaded.push(img);\r\n            }\r\n            this.render();\r\n        },\r\n\r\n        render(data) {\r\n            const { context } = this;\r\n            context.clearRect(0, 0, this.width, this.height);\r\n            context.drawImage(this.backgroundImage, 0, 0, this.width, this.height);\r\n            if (0 < this.imagesUploaded.length) {\r\n                const imageLength = this.imagesUploaded.length;\r\n                for (const [index, { x, y, w, h }] of POS.entries()) {\r\n                    const img = this.imagesUploaded[index % imageLength];\r\n                    context.drawImage(img, 0, 0, img.width, img.height, x - w / 2, y - h / 2, w, h);\r\n                }\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scope lang=\"scss\">\r\n.page-merge {\r\n    display: flex;\r\n    box-sizing: border-box;\r\n    height: 100vh;\r\n    &__left {\r\n        position: relative;\r\n        overflow: hidden;\r\n        height: 100%;\r\n        flex-shrink: 0;\r\n        padding: 16px;\r\n\r\n        &__content {\r\n            display: flex;\r\n            position: relative;\r\n            height: 100%;\r\n            width: 100%;\r\n            box-shadow: 0 0 5px 1px rgba(#000, 0.26);\r\n            canvas {\r\n                height: 100%;\r\n            }\r\n\r\n            ul {\r\n                border: 1px solid #ddd;\r\n                width: 80px;\r\n                overflow-x: hidden;\r\n                overflow-y: scroll;\r\n                li {\r\n                    width: 100%;\r\n                    height: 100px;\r\n                    & + li {\r\n                        border-top: 1px solid #ddd;\r\n                    }\r\n                    img {\r\n                        display: block;\r\n                        width: 100%;\r\n                        height: 100px;\r\n                        object-fit: contain;\r\n                    }\r\n                }\r\n            }\r\n\r\n            > .a-button-save {\r\n                position: absolute;\r\n                left: 8px;\r\n                top: 8px;\r\n                width: 120px;\r\n            }\r\n        }\r\n    }\r\n\r\n    &__middle {\r\n        flex: 1;\r\n        padding: 16px;\r\n        ul {\r\n            display: flex;\r\n            li.img {\r\n                list-style: none;\r\n                height: 120px;\r\n                width: 120px;\r\n                border: 1px solid #ddd;\r\n                & + li {\r\n                    margin-left: 8px;\r\n                }\r\n\r\n                &.active {\r\n                    box-shadow: 0 0 6px 6px rgba(#000, 0.26);\r\n                }\r\n\r\n                img {\r\n                    width: 120px;\r\n                    height: 120px;\r\n                    display: block;\r\n                    object-fit: contain;\r\n                }\r\n            }\r\n\r\n            li {\r\n                .button-add {\r\n                    height: 120px;\r\n                    width: 120px;\r\n                    line-height: 120px;\r\n                    font-size: 24px !important;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","var cache = {};\r\nfunction _isImage(image) {\r\n    return '[object HTMLImageElement]' === Object.prototype.toString.call(image);\r\n}\r\nfunction loadImage(url) {\r\n    return new Promise(function (resolve, reject) {\r\n        if (_isImage(url)) {\r\n            resolve(url);\r\n        }\r\n        else if (/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(url)) {\r\n            var canvas = document.createElement('canvas');\r\n            canvas.width = 1;\r\n            canvas.height = 1;\r\n            var context = canvas.getContext('2d');\r\n            context.fillStyle = url;\r\n            context.fillRect(0, 0, 1, 1);\r\n            loadImage(canvas.toDataURL()).then(resolve);\r\n        }\r\n        else {\r\n            if (cache[url]) {\r\n                resolve(cache[url]);\r\n                return;\r\n            }\r\n            var img_1 = new Image();\r\n            img_1.setAttribute(\"crossOrigin\", 'Anonymous');\r\n            img_1.onload = function () {\r\n                cache[url] = img_1;\r\n                resolve(img_1);\r\n            };\r\n            img_1.onerror = reject;\r\n            img_1.src = url;\r\n        }\r\n    });\r\n}\n\nexport default loadImage;\n//# sourceMappingURL=index.es.js.map\n","export const POS = [{\r\n    x: 400,\r\n    y: 670,\r\n    h: 500,\r\n    w: 500,\r\n}, {\r\n    x: 880,\r\n    y: 1420,\r\n    h: 500,\r\n    w: 500,\r\n}, {\r\n    x: 400,\r\n    y: 2170,\r\n    h: 500,\r\n    w: 500,\r\n}, {\r\n    x: 880,\r\n    y: 2920,\r\n    h: 500,\r\n    w: 500,\r\n}, {\r\n    x: 400,\r\n    y: 3670,\r\n    h: 500,\r\n    w: 500,\r\n}, {\r\n    x: 880,\r\n    y: 4420,\r\n    h: 500,\r\n    w: 500,\r\n}];","<template>\r\n    <canvas\r\n        @tap=\"onTap\"\r\n        @panstart=\"onPanstart\"\r\n        @panmove=\"onPanmove\"\r\n        @panend=\"onPanend\"\r\n        ref=\"c\"\r\n        :width=\"width\"\r\n        :height=\"height\"\r\n    />\r\n</template>\r\n\r\n<script>\r\nimport AnyTouch from 'any-touch';\r\nimport loadImage from '../../../packages/load-image/dist/index.es';\r\nexport default {\r\n    name: 'Crop',\r\n\r\n    props: {\r\n        width: {\r\n            type: Number,\r\n            default: 2000,\r\n        },\r\n        height: {\r\n            type: Number,\r\n            default: 2000,\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return { at: null, context: null, stack: [] };\r\n    },\r\n\r\n    async mounted() {\r\n        const URL = 'https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/Purple-and-Yellow-Playful-Monster-Daycare-Halloween-Flyer.jpg?v=1595652895';\r\n        this.context = this.$refs.c.getContext('2d');\r\n        this.context.drawImage(await loadImage(URL),0,0,this.width,this.height);\r\n        this.at = new AnyTouch(this.$el);\r\n        this.at.get('pan').set({threshold:0});\r\n    },\r\n\r\n    methods: {\r\n        switchPointToCanvas([x, y]) {\r\n            const { top, left } = this.$refs.c.getBoundingClientRect();\r\n            const { offsetWidth } = this.$refs.c;\r\n            const rate = this.width / offsetWidth;\r\n            return [(x - left) * rate, (y - top) * rate];\r\n        },\r\n\r\n        onPanstart(e) {\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            this.stack.push({ type: 'point', x, y });\r\n            const { context } = this;\r\n            context.save();\r\n            context.strokeStyle = '#f50';\r\n            context.lineWidth = 6;\r\n            context.beginPath();\r\n            context.moveTo(x, y);\r\n        },\r\n\r\n        onPanmove(e) {\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            this.stack.push({ type: 'point', x, y });\r\n            const { context } = this;\r\n            context.lineTo(x, y);\r\n            context.stroke();\r\n        },\r\n\r\n        onPanend() {\r\n            const { context } = this;\r\n            context.closePath();\r\n            context.restore();\r\n        },\r\n\r\n        onTap(e) {\r\n            const [x, y] = this.switchPointToCanvas([e.x, e.y]);\r\n            this.stack.push({ type: 'circle', x, y, r: 30, fill: '#69C' });\r\n            this.draw();\r\n        },\r\n\r\n        drawCircle({ x, y, r, fill }) {\r\n            const { context } = this;\r\n            context.save();\r\n            context.beginPath();\r\n            context.arc(x, y, r, 0, 2 * Math.PI, false);\r\n            context.fillStyle = fill;\r\n            context.fill();\r\n            context.closePath();\r\n            context.restore();\r\n        },\r\n\r\n        draw() {\r\n            for (const item of this.stack) {\r\n                this.drawCircle(item);\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __values } from 'tslib';\n\nvar default_1 = (function () {\r\n    function default_1() {\r\n        this.listenersMap = {};\r\n    }\r\n    default_1.prototype.target = function (el) {\r\n        var _this = this;\r\n        return {\r\n            on: function (eventName, listener) {\r\n                _this.on(eventName, listener, { target: el });\r\n            }\r\n        };\r\n    };\r\n    default_1.prototype.on = function (eventName, listener, _a) {\r\n        var e_1, _b;\r\n        var target = (_a === void 0 ? {} : _a).target;\r\n        var eventNames = Array.isArray(eventName) ? eventName : [eventName];\r\n        try {\r\n            for (var eventNames_1 = __values(eventNames), eventNames_1_1 = eventNames_1.next(); !eventNames_1_1.done; eventNames_1_1 = eventNames_1.next()) {\r\n                var name = eventNames_1_1.value;\r\n                if (void 0 === this.listenersMap[name]) {\r\n                    this.listenersMap[name] = [];\r\n                }\r\n                if (void 0 !== target) {\r\n                    listener.target = target;\r\n                }\r\n                this.listenersMap[name].push(listener);\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (eventNames_1_1 && !eventNames_1_1.done && (_b = eventNames_1.return)) _b.call(eventNames_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    default_1.prototype.off = function (eventName, listener) {\r\n        var listeners = this.listenersMap[eventName];\r\n        if (void 0 !== listeners) {\r\n            if (void 0 === listener) {\r\n                delete this.listenersMap[eventName];\r\n            }\r\n            else {\r\n                var index = listeners.findIndex(function (fn) { return fn === listener; });\r\n                listeners.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.emit = function (eventName, payload, beforeHook) {\r\n        var e_2, _a;\r\n        if (beforeHook === void 0) { beforeHook = function () { return true; }; }\r\n        var listeners = this.listenersMap[eventName];\r\n        if (void 0 !== listeners && 0 < listeners.length) {\r\n            try {\r\n                for (var listeners_1 = __values(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {\r\n                    var listener = listeners_1_1.value;\r\n                    var target = listener.target;\r\n                    if (beforeHook({ target: target })) {\r\n                        listener(payload);\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.destroy = function () {\r\n        this.listenersMap = {};\r\n    };\r\n    return default_1;\r\n}());\n\nexport default default_1;\n","var ObjectToString = Object.prototype.toString;\r\nfunction isRegExp(input) {\r\n    return '[object RegExp]' === ObjectToString.call(input);\r\n}\r\nfunction isFunction(input) {\r\n    return '[object Function]' === ObjectToString.call(input);\r\n}\n\nvar CLIENT_X = 'clientX';\r\nvar CLIENT_Y = 'clientY';\r\nvar COMPUTE_INTERVAL = 16;\r\nvar INPUT_START = 'start';\r\nvar INPUT_MOVE = 'move';\r\nvar INPUT_CANCEL = 'cancel';\r\nvar INPUT_END = 'end';\r\nvar DIRECTION_LEFT = 'left';\r\nvar DIRECTION_RIGHT = 'right';\r\nvar DIRECTION_UP = 'up';\r\nvar DIRECTION_DOWN = 'down';\r\nvar NONE = 'none';\r\nvar TOUCH = 'touch';\r\nvar MOUSE = 'mouse';\r\nvar TOUCH_START = TOUCH + INPUT_START;\r\nvar TOUCH_MOVE = TOUCH + INPUT_MOVE;\r\nvar TOUCH_END = TOUCH + INPUT_END;\r\nvar TOUCH_CANCEL = TOUCH + INPUT_CANCEL;\r\nvar MOUSE_UP = MOUSE + DIRECTION_UP;\r\nvar MOUSE_MOVE = MOUSE + INPUT_MOVE;\r\nvar MOUSE_DOWN = MOUSE + DIRECTION_DOWN;\r\nvar SUPPORT_TOUCH = window.wx || \"on\" + TOUCH_START in window;\r\nvar STATUS_POSSIBLE = 'p';\r\nvar STATUS_START = INPUT_START;\r\nvar STATUS_MOVE = INPUT_MOVE;\r\nvar STATUS_END = INPUT_END;\r\nvar STATUS_RECOGNIZED = 'r';\r\nvar STATUS_FAILED = 'f';\r\nvar STATUS_CANCELLED = INPUT_CANCEL;\n\nfunction round2(n) {\r\n    return Math.round(n * 100) / 100;\r\n}\n\nexport { CLIENT_X, CLIENT_Y, COMPUTE_INTERVAL, DIRECTION_DOWN, DIRECTION_LEFT, DIRECTION_RIGHT, DIRECTION_UP, INPUT_CANCEL, INPUT_END, INPUT_MOVE, INPUT_START, MOUSE, MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, NONE, STATUS_CANCELLED, STATUS_END, STATUS_FAILED, STATUS_MOVE, STATUS_POSSIBLE, STATUS_RECOGNIZED, STATUS_START, SUPPORT_TOUCH, TOUCH, TOUCH_CANCEL, TOUCH_END, TOUCH_MOVE, TOUCH_START, isFunction, isRegExp, round2 };\n","import { __extends, __assign, __rest, __values, __read } from 'tslib';\nimport AnyEvent from 'any-event';\nimport { MOUSE_DOWN, MOUSE_MOVE, MOUSE_UP, INPUT_START, INPUT_MOVE, INPUT_END, INPUT_CANCEL, SUPPORT_TOUCH, CLIENT_X, CLIENT_Y, isRegExp, isFunction, TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL, TOUCH } from '@any-touch/shared';\n\nvar default_1 = (function () {\r\n    function default_1() {\r\n    }\r\n    return default_1;\r\n}());\n\nvar default_1$1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    default_1.prototype.load = function (event, el) {\r\n        var targets = [];\r\n        var points = [];\r\n        Array.from(event.touches).forEach(function (_a) {\r\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\r\n            if (el === null || el === void 0 ? void 0 : el.contains(target)) {\r\n                targets.push(target);\r\n                points.push({ clientX: clientX, clientY: clientY, target: target });\r\n            }\r\n        });\r\n        var changedPoints = Array.from(event.changedTouches).map(function (_a) {\r\n            var clientX = _a.clientX, clientY = _a.clientY, target = _a.target;\r\n            return ({ clientX: clientX, clientY: clientY, target: target });\r\n        });\r\n        return {\r\n            inputType: event.type.replace('touch', ''),\r\n            changedPoints: changedPoints,\r\n            points: points,\r\n            nativeEvent: event,\r\n            target: event.target,\r\n            targets: targets\r\n        };\r\n    };\r\n    return default_1;\r\n}(default_1));\n\nvar default_1$2 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1() {\r\n        var _this = _super.call(this) || this;\r\n        _this.target = null;\r\n        _this.isPressed = false;\r\n        return _this;\r\n    }\r\n    default_1.prototype.load = function (event) {\r\n        var clientX = event.clientX, clientY = event.clientY, type = event.type, button = event.button, target = event.target;\r\n        var points = [{ clientX: clientX, clientY: clientY, target: target }];\r\n        var inputType;\r\n        if (MOUSE_DOWN === type && 0 === button) {\r\n            this.target = target;\r\n            this.isPressed = true;\r\n            inputType = INPUT_START;\r\n        }\r\n        else if (this.isPressed) {\r\n            if (MOUSE_MOVE === type) {\r\n                inputType = INPUT_MOVE;\r\n            }\r\n            else if (MOUSE_UP === type) {\r\n                points = [];\r\n                inputType = INPUT_END;\r\n                this.isPressed = false;\r\n            }\r\n        }\r\n        var changedPoints = this.prevPoints || [{ clientX: clientX, clientY: clientY, target: target }];\r\n        this.prevPoints = [{ clientX: clientX, clientY: clientY, target: target }];\r\n        if (void 0 !== inputType) {\r\n            return {\r\n                inputType: inputType,\r\n                changedPoints: changedPoints,\r\n                points: points,\r\n                target: this.target,\r\n                targets: [this.target],\r\n                nativeEvent: event\r\n            };\r\n        }\r\n    };\r\n    return default_1;\r\n}(default_1));\n\nvar default_1$3 = (function () {\r\n    function default_1(el) {\r\n        var Input = SUPPORT_TOUCH ? default_1$1 : default_1$2;\r\n        this.adapter = new Input();\r\n        this.id = 0;\r\n        this.el = el;\r\n    }\r\n    default_1.prototype.transform = function (event) {\r\n        this.prevInput = this.activeInput;\r\n        var baseInputWithoutId = this.adapter.load(event, this.el);\r\n        if (void 0 !== baseInputWithoutId) {\r\n            var id = Number.MAX_SAFE_INTEGER > this.id ? ++this.id : 1;\r\n            var baseInput = __assign(__assign({}, baseInputWithoutId), { id: id });\r\n            var pureInput = extendInput(baseInput);\r\n            this.activeInput = pureInput;\r\n            var isStart = pureInput.isStart, pointLength = pureInput.pointLength;\r\n            if (isStart) {\r\n                this.startInput = pureInput;\r\n                this.prevInput = void 0;\r\n                if (1 < pointLength) {\r\n                    this.startMultiInput = pureInput;\r\n                }\r\n                else {\r\n                    this.startMultiInput = void 0;\r\n                }\r\n            }\r\n            return __assign(__assign({}, pureInput), { prevInput: this.prevInput, startMultiInput: this.startMultiInput, startInput: this.startInput });\r\n        }\r\n    };\r\n    return default_1;\r\n}());\r\nfunction getCenter(points) {\r\n    var length = points.length;\r\n    if (0 < length) {\r\n        if (1 === length) {\r\n            var _a = points[0], clientX = _a.clientX, clientY = _a.clientY;\r\n            return { x: Math.round(clientX), y: Math.round(clientY) };\r\n        }\r\n        var countPoint = points.reduce(function (countPoint, point) {\r\n            countPoint.x += point[CLIENT_X];\r\n            countPoint.y += point[CLIENT_Y];\r\n            return countPoint;\r\n        }, { x: 0, y: 0 });\r\n        return { x: Math.round(countPoint.x / length), y: Math.round(countPoint.y / length) };\r\n    }\r\n}\r\nfunction extendInput(inputBase) {\r\n    var inputType = inputBase.inputType, points = inputBase.points, changedPoints = inputBase.changedPoints, nativeEvent = inputBase.nativeEvent;\r\n    var pointLength = points.length;\r\n    var isStart = INPUT_START === inputType;\r\n    var isEnd = (INPUT_END === inputType && 0 === pointLength) || INPUT_CANCEL === inputType;\r\n    var timestamp = performance.now();\r\n    var _a = getCenter(points) || getCenter(changedPoints), x = _a.x, y = _a.y;\r\n    var currentTarget = nativeEvent.currentTarget;\r\n    return __assign(__assign({}, inputBase), { x: x, y: y,\r\n        timestamp: timestamp,\r\n        isStart: isStart, isEnd: isEnd,\r\n        pointLength: pointLength,\r\n        currentTarget: currentTarget,\r\n        getOffset: function (el) {\r\n            if (el === void 0) { el = currentTarget; }\r\n            var rect = el.getBoundingClientRect();\r\n            return { x: x - Math.round(rect.left), y: y - Math.round(rect.top) };\r\n        } });\r\n}\n\nfunction dispatchDomEvent (el, payload, eventInit) {\r\n    var target = payload.target, currentTarget = payload.currentTarget, type = payload.type, data = __rest(payload, [\"target\", \"currentTarget\", \"type\"]);\r\n    var event;\r\n    if (document.createEvent) {\r\n        event = document.createEvent('HTMLEvents');\r\n        event.initEvent(type, eventInit === null || eventInit === void 0 ? void 0 : eventInit.bubbles, eventInit === null || eventInit === void 0 ? void 0 : eventInit.cancelable);\r\n    }\r\n    else {\r\n        event = new Event(type, eventInit);\r\n    }\r\n    Object.assign(event, data, {\r\n        match: function () {\r\n            return payload.targets.every(function (target) {\r\n                return event.currentTarget.contains(target);\r\n            });\r\n        }\r\n    });\r\n    return el.dispatchEvent(event);\r\n}\n\nfunction canPreventDefault (event, options) {\r\n    if (!options.isPreventDefault)\r\n        return false;\r\n    var isPreventDefault = true;\r\n    if (null !== event.target) {\r\n        var preventDefaultExclude = options.preventDefaultExclude;\r\n        if (isRegExp(preventDefaultExclude)) {\r\n            if ('tagName' in event.target) {\r\n                var tagName = event.target.tagName;\r\n                isPreventDefault = !preventDefaultExclude.test(tagName);\r\n            }\r\n        }\r\n        else if (isFunction(preventDefaultExclude)) {\r\n            isPreventDefault = !preventDefaultExclude(event);\r\n        }\r\n    }\r\n    return isPreventDefault;\r\n}\n\nvar TOUCH_EVENT_NAMES = [TOUCH_START, TOUCH_MOVE, TOUCH_END, TOUCH_CANCEL];\r\nfunction bindElement (el, callback, options, device) {\r\n    if (SUPPORT_TOUCH || 'Touch' === device) {\r\n        TOUCH_EVENT_NAMES.forEach(function (eventName) {\r\n            el.addEventListener(eventName, callback, options);\r\n        });\r\n        return function () {\r\n            TOUCH_EVENT_NAMES.forEach(function (eventName) {\r\n                el.removeEventListener(eventName, callback);\r\n            });\r\n        };\r\n    }\r\n    else {\r\n        el.addEventListener(MOUSE_DOWN, callback, options);\r\n        window.addEventListener(MOUSE_MOVE, callback, options);\r\n        window.addEventListener(MOUSE_UP, callback, options);\r\n        return function () {\r\n            el.removeEventListener(MOUSE_DOWN, callback);\r\n            window.removeEventListener(MOUSE_MOVE, callback);\r\n            window.removeEventListener(MOUSE_UP, callback);\r\n        };\r\n    }\r\n}\n\nfunction use(instanceOrClass, Recognizer, options) {\r\n    var name = options === null || options === void 0 ? void 0 : options.name;\r\n    if (void 0 !== name && void 0 !== instanceOrClass.recognizerMap[name])\r\n        return;\r\n    var instance = new Recognizer(options);\r\n    instanceOrClass.recognizerMap[instance.name] = instance;\r\n    instance.recognizerMap = instanceOrClass.recognizerMap;\r\n    instanceOrClass.recognizers.push(instanceOrClass.recognizerMap[instance.name]);\r\n}\r\nfunction removeUse(instanceOrClass, recognizerName) {\r\n    var e_1, _a;\r\n    if (void 0 === recognizerName) {\r\n        instanceOrClass.recognizers = [];\r\n        instanceOrClass.recognizerMap = {};\r\n    }\r\n    else {\r\n        try {\r\n            for (var _b = __values(instanceOrClass.recognizers.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var _d = __read(_c.value, 2), index = _d[0], recognizer = _d[1];\r\n                if (recognizerName === recognizer.options.name) {\r\n                    instanceOrClass.recognizers.splice(index, 1);\r\n                    delete instanceOrClass.recognizerMap[recognizerName];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    }\r\n}\n\nvar AT_AFTER = 'at:after';\r\nfunction emit2(at, payload) {\r\n    var type = payload.type, target = payload.target, targets = payload.targets;\r\n    at.emit(type, payload, function (data) {\r\n        if (void 0 !== (data === null || data === void 0 ? void 0 : data.target)) {\r\n            var currentTarget_1 = data.target;\r\n            return targets.every(function (target) { return currentTarget_1.contains(target); });\r\n        }\r\n        return true;\r\n    });\r\n    at.emit(AT_AFTER, payload);\r\n    if (!!at.options.domEvents\r\n        && void 0 !== at.el\r\n        && null !== target) {\r\n        dispatchDomEvent(target, payload, at.options.domEvents);\r\n        dispatchDomEvent(target, __assign(__assign({}, payload), { _type: payload.type, type: AT_AFTER }), at.options.domEvents);\r\n    }\r\n}\n\nvar DEFAULT_OPTIONS = {\r\n    domEvents: { bubbles: true, cancelable: true },\r\n    isPreventDefault: true,\r\n    preventDefaultExclude: /^(?:INPUT|TEXTAREA|BUTTON|SELECT)$/\r\n};\r\nvar AnyTouch = (function (_super) {\r\n    __extends(AnyTouch, _super);\r\n    function AnyTouch(el, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.recognizerMap = {};\r\n        _this.recognizers = [];\r\n        _this.cacheComputedFunctionGroup = Object.create(null);\r\n        _this.el = el;\r\n        _this.input = new default_1$3(el);\r\n        _this.options = __assign(__assign({}, DEFAULT_OPTIONS), options);\r\n        _this.recognizerMap = AnyTouch.recognizerMap;\r\n        _this.recognizers = AnyTouch.recognizers;\r\n        if (void 0 !== el) {\r\n            el.style.webkitTapHighlightColor = 'rgba(0,0,0,0)';\r\n            var supportsPassive_1 = false;\r\n            try {\r\n                var opts = {};\r\n                Object.defineProperty(opts, 'passive', ({\r\n                    get: function () {\r\n                        supportsPassive_1 = true;\r\n                    }\r\n                }));\r\n                window.addEventListener('_', function () { return void 0; }, opts);\r\n            }\r\n            catch (_a) { }\r\n            _this.on('unbind', bindElement(el, _this.catchEvent.bind(_this), !_this.options.isPreventDefault && supportsPassive_1 ? { passive: true } : false, _this.options.device));\r\n        }\r\n        return _this;\r\n    }\r\n    AnyTouch.prototype.use = function (Recognizer, options) {\r\n        use(this, Recognizer, options);\r\n    };\r\n    AnyTouch.prototype.removeUse = function (name) {\r\n        removeUse(this, name);\r\n    };\r\n    AnyTouch.prototype.catchEvent = function (event) {\r\n        var e_1, _a;\r\n        var _this = this;\r\n        if (canPreventDefault(event, this.options)) {\r\n            event.preventDefault();\r\n        }\r\n        var input = this.input.transform(event);\r\n        if (void 0 !== input) {\r\n            var AT_TOUCH = \"at:\" + TOUCH;\r\n            var AT_TOUCH_WITH_STATUS = AT_TOUCH + input.inputType;\r\n            this.emit(AT_TOUCH, input);\r\n            this.emit(AT_TOUCH_WITH_STATUS, input);\r\n            var domEvents = this.options.domEvents;\r\n            if (false !== domEvents) {\r\n                var target = event.target;\r\n                if (null !== target) {\r\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH }), domEvents);\r\n                    dispatchDomEvent(target, __assign(__assign({}, input), { type: AT_TOUCH_WITH_STATUS }), domEvents);\r\n                }\r\n            }\r\n            var cacheComputedGroup = Object.create(null);\r\n            var _loop_1 = function (recognizer) {\r\n                if (recognizer.disabled)\r\n                    return \"continue\";\r\n                recognizer.computedGroup = cacheComputedGroup;\r\n                recognizer.computeFunctionMap = this_1.cacheComputedFunctionGroup;\r\n                recognizer.recognize(input, function (type, ev) {\r\n                    var payload = __assign(__assign(__assign({}, input), ev), { type: type, baseType: recognizer.name });\r\n                    Object.freeze(payload);\r\n                    if (void 0 === _this.beforeEachHook) {\r\n                        emit2(_this, payload);\r\n                    }\r\n                    else {\r\n                        _this.beforeEachHook(recognizer, function () {\r\n                            emit2(_this, payload);\r\n                        });\r\n                    }\r\n                });\r\n                cacheComputedGroup = recognizer.computedGroup;\r\n                this_1.cacheComputedFunctionGroup = recognizer.computeFunctionMap;\r\n            };\r\n            var this_1 = this;\r\n            try {\r\n                for (var _b = __values(this.recognizers), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var recognizer = _c.value;\r\n                    _loop_1(recognizer);\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n    };\r\n    AnyTouch.prototype.beforeEach = function (hook) {\r\n        this.beforeEachHook = hook;\r\n    };\r\n    AnyTouch.prototype.get = function (name) {\r\n        return this.recognizerMap[name];\r\n    };\r\n    AnyTouch.prototype.set = function (options) {\r\n        this.options = __assign(__assign({}, this.options), options);\r\n    };\r\n    AnyTouch.prototype.destroy = function () {\r\n        this.emit('unbind');\r\n        this.listenersMap = {};\r\n    };\r\n    AnyTouch.version = '0.7.7';\r\n    AnyTouch.recognizers = [];\r\n    AnyTouch.recognizerMap = {};\r\n    AnyTouch.use = function (Recognizer, options) {\r\n        use(AnyTouch, Recognizer, options);\r\n    };\r\n    AnyTouch.removeUse = function (recognizerName) {\r\n        removeUse(AnyTouch, recognizerName);\r\n    };\r\n    return AnyTouch;\r\n}(AnyEvent));\n\nexport default AnyTouch;\n","import { __assign, __values } from 'tslib';\nimport { STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED, STATUS_POSSIBLE, STATUS_START, STATUS_MOVE, INPUT_MOVE, INPUT_END, INPUT_CANCEL, INPUT_START } from '@any-touch/shared';\n\nfunction resetStatus (recognizer) {\r\n    if (-1 !== [STATUS_END, STATUS_CANCELLED, STATUS_RECOGNIZED, STATUS_FAILED].indexOf(recognizer.status)) {\r\n        recognizer.status = STATUS_POSSIBLE;\r\n    }\r\n}\n\nfunction flow(isVaild, activeStatus, inputType) {\r\n    var _a, _b, _c, _d, _e, _f, _g;\r\n    var STATE_MAP = {\r\n        1: (_a = {},\r\n            _a[STATUS_POSSIBLE] = (_b = {},\r\n                _b[INPUT_MOVE] = STATUS_START,\r\n                _b),\r\n            _a[STATUS_START] = (_c = {},\r\n                _c[INPUT_MOVE] = STATUS_MOVE,\r\n                _c[INPUT_END] = STATUS_END,\r\n                _c[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _c),\r\n            _a[STATUS_MOVE] = (_d = {},\r\n                _d[INPUT_MOVE] = STATUS_MOVE,\r\n                _d[INPUT_END] = STATUS_END,\r\n                _d[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _d),\r\n            _a),\r\n        0: (_e = {},\r\n            _e[STATUS_START] = (_f = {},\r\n                _f[INPUT_MOVE] = STATUS_CANCELLED,\r\n                _f[INPUT_END] = STATUS_END,\r\n                _f[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _f),\r\n            _e[STATUS_MOVE] = (_g = {},\r\n                _g[INPUT_START] = STATUS_FAILED,\r\n                _g[INPUT_MOVE] = STATUS_CANCELLED,\r\n                _g[INPUT_END] = STATUS_END,\r\n                _g[INPUT_CANCEL] = STATUS_CANCELLED,\r\n                _g),\r\n            _e)\r\n    };\r\n    if (void 0 !== STATE_MAP[Number(isVaild)][activeStatus]) {\r\n        return STATE_MAP[Number(isVaild)][activeStatus][inputType] || activeStatus;\r\n    }\r\n    else {\r\n        return activeStatus;\r\n    }\r\n}\r\nfunction recognizeForPressMoveLike (recognizer, input, emit) {\r\n    var isVaild = recognizer.test(input);\r\n    resetStatus(recognizer);\r\n    var inputType = input.inputType;\r\n    recognizer.status = flow(isVaild, recognizer.status, inputType);\r\n    var computed = recognizer.computed;\r\n    recognizer.isRecognized = [STATUS_START, STATUS_MOVE].includes(recognizer.status);\r\n    var name = recognizer.name, status = recognizer.status, isRecognized = recognizer.isRecognized;\r\n    if (isRecognized) {\r\n        emit(name, computed);\r\n    }\r\n    if (isRecognized || [STATUS_END, STATUS_CANCELLED].includes(recognizer.status)) {\r\n        emit(name + status, computed);\r\n    }\r\n    return isVaild;\r\n}\n\nvar default_1 = (function () {\r\n    function default_1(options) {\r\n        this.disabled = false;\r\n        this.status = STATUS_POSSIBLE;\r\n        this.isRecognized = false;\r\n        this.recognizerMap = {};\r\n        this.computedGroup = {};\r\n        this.computed = {};\r\n        this.computeFunctionMap = {};\r\n        this.options = options;\r\n        this.name = this.options.name;\r\n    }\r\n    default_1.prototype.set = function (options) {\r\n        if (void 0 !== options) {\r\n            this.options = __assign(__assign({}, this.options), options);\r\n        }\r\n        return this;\r\n    };\r\n    default_1.prototype.isValidPointLength = function (pointLength) {\r\n        return 0 === this.options.pointLength || this.options.pointLength === pointLength;\r\n    };\r\n    default_1.prototype.compute = function (Cs, input) {\r\n        var e_1, _a;\r\n        var computed = Object.create(null);\r\n        try {\r\n            for (var Cs_1 = __values(Cs), Cs_1_1 = Cs_1.next(); !Cs_1_1.done; Cs_1_1 = Cs_1.next()) {\r\n                var C = Cs_1_1.value;\r\n                var _id = C._id;\r\n                var _b = this, computedGroup = _b.computedGroup, computeFunctionMap = _b.computeFunctionMap;\r\n                if (void 0 === computeFunctionMap[_id]) {\r\n                    computeFunctionMap[_id] = C();\r\n                }\r\n                computedGroup[_id] = computedGroup[_id] || computeFunctionMap[_id](input);\r\n                for (var key in computedGroup[_id]) {\r\n                    computed[key] = computedGroup[_id][key];\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (Cs_1_1 && !Cs_1_1.done && (_a = Cs_1.return)) _a.call(Cs_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return computed;\r\n    };\r\n    return default_1;\r\n}());\n\nexport default default_1;\nexport { recognizeForPressMoveLike, resetStatus as resetStatusForPressMoveLike };\n","import { NONE, DIRECTION_RIGHT, DIRECTION_LEFT, DIRECTION_DOWN, DIRECTION_UP } from '@any-touch/shared';\n\nvar getVLength = (function (v) {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y);\r\n});\n\nvar getDotProduct = (function (v1, v2) {\r\n    return v1.x * v2.x + v1.y * v2.y;\r\n});\n\nvar getRadian = (function (v1, v2) {\r\n    var mr = getVLength(v1) * getVLength(v2);\r\n    if (mr === 0)\r\n        return 0;\r\n    var r = getDotProduct(v1, v2) / mr;\r\n    if (r > 1)\r\n        r = 1;\r\n    return Math.acos(r);\r\n});\n\nvar getCross = (function (v1, v2) {\r\n    return v1.x * v2.y - v2.x * v1.y;\r\n});\n\nvar radianToAngle = (function (radian) { return radian / Math.PI * 180; });\n\nvar getAngle = (function (v1, v2) {\r\n    var angle = getRadian(v1, v2);\r\n    if (getCross(v1, v2) > 0) {\r\n        angle *= -1;\r\n    }\r\n    return radianToAngle(angle);\r\n});\n\nvar getDirection = (function (x, y) {\r\n    if (x === y) {\r\n        return NONE;\r\n    }\r\n    else if (Math.abs(x) > Math.abs(y)) {\r\n        return 0 < x ? DIRECTION_RIGHT : DIRECTION_LEFT;\r\n    }\r\n    else {\r\n        return 0 < y ? DIRECTION_DOWN : DIRECTION_UP;\r\n    }\r\n});\n\nexport { getAngle, getCross, getDirection, getDotProduct, getRadian, getVLength, radianToAngle };\n","import { getAngle, radianToAngle, getVLength, getDirection } from '@any-touch/vector';\nimport { INPUT_START, INPUT_MOVE, CLIENT_X, CLIENT_Y, NONE, round2, COMPUTE_INTERVAL } from '@any-touch/shared';\n\nfunction computeAngle (_a) {\r\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\r\n    var deltaAngle = Math.round(getAngle(activeV, prevV));\r\n    var angle = Math.round(getAngle(activeV, startV));\r\n    return { angle: angle, deltaAngle: deltaAngle };\r\n}\n\nfunction ComputeDeltaXY() {\r\n    return function (input) {\r\n        var prevInput = input.prevInput;\r\n        var deltaX = 0;\r\n        var deltaY = 0;\r\n        var deltaXYAngle = 0;\r\n        if (void 0 !== prevInput) {\r\n            deltaX = input.x - prevInput.x;\r\n            deltaY = input.y - prevInput.y;\r\n            if (0 !== deltaX || 0 !== deltaY) {\r\n                var deltaXY = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n                deltaXYAngle = Math.round(radianToAngle(Math.acos(Math.abs(deltaX) / deltaXY)));\r\n            }\r\n        }\r\n        return { deltaX: deltaX, deltaY: deltaY, deltaXYAngle: deltaXYAngle };\r\n    };\r\n}\r\nComputeDeltaXY._id = \"ComputeDeltaXY\";\n\nfunction computeDistance() {\r\n    var displacementX = 0;\r\n    var displacementY = 0;\r\n    var distanceX = 0;\r\n    var distanceY = 0;\r\n    var distance = 0;\r\n    var overallDirection = NONE;\r\n    return function (input) {\r\n        var inputType = input.inputType, startInput = input.startInput;\r\n        if (INPUT_START === inputType) {\r\n            displacementX = 0;\r\n            displacementY = 0;\r\n            distanceX = 0;\r\n            distanceY = 0;\r\n            distance = 0;\r\n            overallDirection = NONE;\r\n        }\r\n        else if (INPUT_MOVE === inputType) {\r\n            displacementX = Math.round(input.points[0][CLIENT_X] - startInput.points[0][CLIENT_X]);\r\n            displacementY = Math.round(input.points[0][CLIENT_Y] - startInput.points[0][CLIENT_Y]);\r\n            distanceX = Math.abs(displacementX);\r\n            distanceY = Math.abs(displacementY);\r\n            distance = Math.round(getVLength({ x: distanceX, y: distanceY }));\r\n            overallDirection = getDirection(displacementX, displacementY);\r\n        }\r\n        return {\r\n            displacementX: displacementX, displacementY: displacementY, distanceX: distanceX, distanceY: distanceY, distance: distance, overallDirection: overallDirection\r\n        };\r\n    };\r\n}\r\ncomputeDistance._id = \"computeDistance\";\n\nfunction computeMaxLength() {\r\n    var maxPointLength = 0;\r\n    return function (input) {\r\n        var inputType = input.inputType;\r\n        if (INPUT_START === inputType) {\r\n            maxPointLength = input.pointLength;\r\n        }\r\n        return { maxPointLength: maxPointLength };\r\n    };\r\n}\r\ncomputeMaxLength._id = \"computeMaxLength\";\n\nfunction computeScale(_a) {\r\n    var startV = _a.startV, prevV = _a.prevV, activeV = _a.activeV;\r\n    var deltaScale = round2(getVLength(activeV) / getVLength(prevV));\r\n    var scale = round2(getVLength(activeV) / getVLength(startV));\r\n    return { scale: scale, deltaScale: deltaScale };\r\n}\n\nfunction ComputeVAndDir() {\r\n    var velocityX = 0;\r\n    var velocityY = 0;\r\n    var speedX = 0;\r\n    var speedY = 0;\r\n    var direction;\r\n    var _lastValidInput;\r\n    return function (input) {\r\n        if (void 0 !== input) {\r\n            var inputType = input.inputType;\r\n            _lastValidInput = _lastValidInput || input.startInput;\r\n            var deltaTime = input.timestamp - _lastValidInput.timestamp;\r\n            if (INPUT_MOVE === inputType && COMPUTE_INTERVAL < deltaTime) {\r\n                var deltaX = input.x - _lastValidInput.x;\r\n                var deltaY = input.y - _lastValidInput.y;\r\n                speedX = Math.round(deltaX / deltaTime * 100) / 100;\r\n                speedY = Math.round(deltaY / deltaTime * 100) / 100;\r\n                velocityX = Math.abs(speedX);\r\n                velocityY = Math.abs(speedY);\r\n                direction = getDirection(deltaX, deltaY) || (direction);\r\n                _lastValidInput = input;\r\n            }\r\n        }\r\n        return { velocityX: velocityX, velocityY: velocityY, speedX: speedX, speedY: speedY, direction: direction };\r\n    };\r\n}\r\nComputeVAndDir._id = \"ComputeVAndDir\";\n\nfunction computeVector(input) {\r\n    return {\r\n        x: input.points[1][CLIENT_X] - input.points[0][CLIENT_X],\r\n        y: input.points[1][CLIENT_Y] - input.points[0][CLIENT_Y]\r\n    };\r\n}\n\nfunction ComputeVectorForMutli() {\r\n    return function (input) {\r\n        var prevInput = input.prevInput, startMultiInput = input.startMultiInput;\r\n        if (void 0 !== startMultiInput &&\r\n            void 0 !== prevInput &&\r\n            input.id !== startMultiInput.id &&\r\n            1 < prevInput.pointLength &&\r\n            1 < input.pointLength) {\r\n            return {\r\n                startV: computeVector(startMultiInput),\r\n                prevV: computeVector(prevInput),\r\n                activeV: computeVector(input)\r\n            };\r\n        }\r\n    };\r\n}\r\nComputeVectorForMutli._id = \"ComputeVectorForMutli\";\n\nexport { ComputeDeltaXY, computeDistance as ComputeDistance, computeMaxLength as ComputeMaxLength, ComputeVAndDir, ComputeVectorForMutli, computeAngle, computeScale, computeVector };\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_END, STATUS_POSSIBLE, STATUS_RECOGNIZED, STATUS_FAILED } from '@any-touch/shared';\nimport Recognizer from '@any-touch/recognizer';\nimport { getVLength } from '@any-touch/vector';\nimport { ComputeMaxLength, ComputeDistance } from '@any-touch/compute';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'tap',\r\n    pointLength: 1,\r\n    tapTimes: 1,\r\n    waitNextTapTime: 300,\r\n    maxDistance: 2,\r\n    maxDistanceFromPrevTap: 9,\r\n    maxPressTime: 250,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        var _this = _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n        _this.tapCount = 0;\r\n        return _this;\r\n    }\r\n    default_1.prototype._isValidDistanceFromPrevTap = function (center) {\r\n        if (void 0 !== this.prevTapPoint) {\r\n            var distanceFromPreviousTap = getVLength({ x: center.x - this.prevTapPoint.x, y: center.y - this.prevTapPoint.y });\r\n            this.prevTapPoint = center;\r\n            return this.options.maxDistanceFromPrevTap >= distanceFromPreviousTap;\r\n        }\r\n        else {\r\n            this.prevTapPoint = center;\r\n            return true;\r\n        }\r\n    };\r\n    default_1.prototype._isValidInterval = function () {\r\n        var now = performance.now();\r\n        if (void 0 === this.prevTapTime) {\r\n            this.prevTapTime = now;\r\n            return true;\r\n        }\r\n        else {\r\n            var interval = now - this.prevTapTime;\r\n            this.prevTapTime = now;\r\n            return interval < this.options.waitNextTapTime;\r\n        }\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var inputType = input.inputType, x = input.x, y = input.y;\r\n        this.computed = this.compute([ComputeMaxLength, ComputeDistance], input);\r\n        if (INPUT_END !== inputType)\r\n            return;\r\n        this.status = STATUS_POSSIBLE;\r\n        if (this.test(input)) {\r\n            this.cancelCountDownToFail();\r\n            if (this._isValidDistanceFromPrevTap({ x: x, y: y }) && this._isValidInterval()) {\r\n                this.tapCount++;\r\n            }\r\n            else {\r\n                this.tapCount = 1;\r\n            }\r\n            if (0 === this.tapCount % this.options.tapTimes) {\r\n                this.status = STATUS_RECOGNIZED;\r\n                emit(this.options.name, __assign(__assign({}, this.computed), { tapCount: this.tapCount }));\r\n                this.reset();\r\n            }\r\n            else {\r\n                this.countDownToFail();\r\n            }\r\n        }\r\n        else {\r\n            this.reset();\r\n            this.status = STATUS_FAILED;\r\n        }\r\n    };\r\n    default_1.prototype.countDownToFail = function () {\r\n        var _this = this;\r\n        this._countDownToFailTimer = setTimeout(function () {\r\n            _this.status = STATUS_FAILED;\r\n            _this.reset();\r\n        }, this.options.waitNextTapTime);\r\n    };\r\n    default_1.prototype.cancelCountDownToFail = function () {\r\n        clearTimeout(this._countDownToFailTimer);\r\n    };\r\n    default_1.prototype.reset = function () {\r\n        this.tapCount = 0;\r\n        this.prevTapPoint = void 0;\r\n        this.prevTapTime = void 0;\r\n    };\r\n    default_1.prototype.test = function (input) {\r\n        var startInput = input.startInput, pointLength = input.pointLength;\r\n        var deltaTime = input.timestamp - startInput.timestamp;\r\n        var _a = this.computed, maxPointLength = _a.maxPointLength, distance = _a.distance;\r\n        return maxPointLength === this.options.pointLength &&\r\n            0 === pointLength &&\r\n            this.options.maxDistance >= distance &&\r\n            this.options.maxPressTime > deltaTime;\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVAndDir, ComputeDistance, ComputeDeltaXY } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'pan',\r\n    threshold: 10,\r\n    pointLength: 1\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var distance = this.computed.distance;\r\n        return ((this.isRecognized || this.options.threshold <= distance) &&\r\n            this.isValidPointLength(pointLength));\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        this.computed = this.compute([ComputeVAndDir, ComputeDistance, ComputeDeltaXY], input);\r\n        var isRecognized = void 0 !== this.computed.direction && recognizeForPressMoveLike(this, input, emit);\r\n        if (isRecognized) {\r\n            emit(this.options.name + this.computed.direction, this.computed);\r\n        }\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_END } from '@any-touch/shared';\nimport { ComputeMaxLength, ComputeVAndDir, ComputeDistance } from '@any-touch/compute';\nimport Recognizer from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'swipe',\r\n    threshold: 10,\r\n    velocity: 0.3,\r\n    pointLength: 1,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var inputType = input.inputType;\r\n        if (INPUT_END !== inputType)\r\n            return false;\r\n        var _a = this.computed, velocityX = _a.velocityX, velocityY = _a.velocityY, maxPointLength = _a.maxPointLength, distance = _a.distance;\r\n        return this.options.pointLength === maxPointLength &&\r\n            this.options.threshold < distance &&\r\n            this.options.velocity < Math.max(velocityX, velocityY);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        this.computed = this.compute([ComputeMaxLength, ComputeVAndDir, ComputeDistance], input);\r\n        if (this.test(input)) {\r\n            emit(this.options.name, this.computed);\r\n            emit(this.options.name + this.computed.direction, this.computed);\r\n        }\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { INPUT_START, STATUS_RECOGNIZED, INPUT_END, DIRECTION_UP, INPUT_CANCEL, STATUS_FAILED } from '@any-touch/shared';\nimport { ComputeDistance } from '@any-touch/compute';\nimport Recognizer, { resetStatusForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'press',\r\n    pointLength: 1,\r\n    maxDistance: 9,\r\n    minPressTime: 251,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var _this = this;\r\n        var inputType = input.inputType, startInput = input.startInput, pointLength = input.pointLength;\r\n        if (INPUT_START === inputType && this.isValidPointLength(pointLength)) {\r\n            resetStatusForPressMoveLike(this);\r\n            this.cancel();\r\n            this._timeoutId = setTimeout(function () {\r\n                _this.status = STATUS_RECOGNIZED;\r\n                emit(_this.options.name, input);\r\n            }, this.options.minPressTime);\r\n        }\r\n        else if (INPUT_END === inputType && STATUS_RECOGNIZED === this.status) {\r\n            emit(\"\" + this.options.name + DIRECTION_UP, this.computed);\r\n        }\r\n        else if (STATUS_RECOGNIZED !== this.status) {\r\n            var deltaTime = input.timestamp - startInput.timestamp;\r\n            if (!this.test(input) ||\r\n                (this.options.minPressTime > deltaTime && [INPUT_END, INPUT_CANCEL].includes(inputType))) {\r\n                this.cancel();\r\n                this.status = STATUS_FAILED;\r\n            }\r\n        }\r\n    };\r\n    default_1.prototype.test = function (input) {\r\n        this.computed = this.compute([ComputeDistance], input);\r\n        var distance = this.computed.distance;\r\n        return this.options.maxDistance > distance;\r\n    };\r\n    default_1.prototype.cancel = function () {\r\n        clearTimeout(this._timeoutId);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVectorForMutli, computeScale } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'pinch',\r\n    threshold: 0,\r\n    pointLength: 2,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var scale = this.computed.scale;\r\n        return this.isValidPointLength(pointLength)\r\n            && void 0 !== scale\r\n            && (this.options.threshold < Math.abs(scale - 1) || this.isRecognized);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var computed = this.compute([ComputeVectorForMutli], input);\r\n        if (\"activeV\" in computed) {\r\n            this.computed = __assign(__assign({}, this.computed), computeScale(computed));\r\n        }\r\n        recognizeForPressMoveLike(this, input, emit);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import { __extends, __assign } from 'tslib';\nimport { ComputeVectorForMutli, computeAngle } from '@any-touch/compute';\nimport Recognizer, { recognizeForPressMoveLike } from '@any-touch/recognizer';\n\nvar DEFAULT_OPTIONS = {\r\n    name: 'rotate',\r\n    threshold: 0,\r\n    pointLength: 2,\r\n};\r\nvar default_1 = (function (_super) {\r\n    __extends(default_1, _super);\r\n    function default_1(options) {\r\n        return _super.call(this, __assign(__assign({}, DEFAULT_OPTIONS), options)) || this;\r\n    }\r\n    default_1.prototype.test = function (input) {\r\n        var pointLength = input.pointLength;\r\n        var angle = this.computed.angle;\r\n        return this.isValidPointLength(pointLength) && (this.options.threshold < Math.abs(angle) || this.isRecognized);\r\n    };\r\n    default_1.prototype.recognize = function (input, emit) {\r\n        var computed = this.compute([ComputeVectorForMutli], input);\r\n        if (\"activeV\" in computed) {\r\n            this.computed = __assign(__assign({}, this.computed), computeAngle(computed));\r\n        }\r\n        recognizeForPressMoveLike(this, input, emit);\r\n    };\r\n    return default_1;\r\n}(Recognizer));\n\nexport default default_1;\n","import AnyTouch from '@any-touch/core';\nimport Tap from '@any-touch/tap';\nimport Pan from '@any-touch/pan';\nimport Swipe from '@any-touch/swipe';\nimport Press from '@any-touch/press';\nimport Pinch from '@any-touch/pinch';\nimport Rotate from '@any-touch/rotate';\nimport { STATUS_POSSIBLE, STATUS_START, STATUS_MOVE, STATUS_END, STATUS_CANCELLED, STATUS_FAILED, STATUS_RECOGNIZED } from '@any-touch/shared';\n\nAnyTouch.use(Tap);\r\nAnyTouch.use(Pan);\r\nAnyTouch.use(Swipe);\r\nAnyTouch.use(Press);\r\nAnyTouch.use(Pinch);\r\nAnyTouch.use(Rotate);\r\nAnyTouch.Tap = Tap;\r\nAnyTouch.Pan = Pan;\r\nAnyTouch.Swipe = Swipe;\r\nAnyTouch.Press = Press;\r\nAnyTouch.Pinch = Pinch;\r\nAnyTouch.Rotate = Rotate;\r\nAnyTouch.STATUS_POSSIBLE = STATUS_POSSIBLE;\r\nAnyTouch.STATUS_START = STATUS_START;\r\nAnyTouch.STATUS_MOVE = STATUS_MOVE;\r\nAnyTouch.STATUS_END = STATUS_END;\r\nAnyTouch.STATUS_CANCELLED = STATUS_CANCELLED;\r\nAnyTouch.STATUS_FAILED = STATUS_FAILED;\r\nAnyTouch.STATUS_RECOGNIZED = STATUS_RECOGNIZED;\n\nexport default AnyTouch;\n","import { render } from \"./Crop.vue?vue&type=template&id=a095fac6&scoped=true\"\nimport script from \"./Crop.vue?vue&type=script&lang=js\"\nexport * from \"./Crop.vue?vue&type=script&lang=js\"\n\nimport \"./Crop.vue?vue&type=style&index=0&id=a095fac6&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-a095fac6\"\n\nexport default script","import { render } from \"./Merge.vue?vue&type=template&id=1b7c7499\"\nimport script from \"./Merge.vue?vue&type=script&lang=js\"\nexport * from \"./Merge.vue?vue&type=script&lang=js\"\n\nimport \"./Merge.vue?vue&type=style&index=0&scope=true&lang=scss\"\nscript.render = render\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Crop.vue?vue&type=style&index=0&id=a095fac6&scoped=true&lang=scss\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Crop.vue?vue&type=style&index=0&id=a095fac6&scoped=true&lang=scss\"","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}