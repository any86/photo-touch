(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Merge"],{"159b":function(t,e,n){var a=n("da84"),r=n("fdbc"),i=n("17c2"),o=n("9112");for(var s in r){var c=a[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{o(u,"forEach",i)}catch(l){u.forEach=i}}},"17c2":function(t,e,n){"use strict";var a=n("b727").forEach,r=n("a640"),i=n("ae40"),o=r("forEach"),s=i("forEach");t.exports=o&&s?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"21a6":function(t,e,n){(function(n){var a,r,i;(function(n,o){r=[],a=o,i="function"===typeof a?a.apply(e,r):a,void 0===i||(t.exports=i)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function a(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){s(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,n){var s=o.URL||o.webkitURL,c=document.createElement("a");e=e||t.name||"download",c.download=e,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):r(c.href)?a(t,e,n):i(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,o),n);else if(r(t))a(t,n,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,e,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,n);var i="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var l=o.URL||o.webkitURL,d=l.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout((function(){l.revokeObjectURL(d)}),4e4)}});o.saveAs=s.saveAs=s,t.exports=s}))}).call(this,n("c8ba"))},3835:function(t,e,n){"use strict";function a(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)if(n.push(o.value),e&&n.length===e)break}catch(c){r=!0,i=c}finally{try{a||null==s["return"]||s["return"]()}finally{if(r)throw i}}return n}}var i=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return a(t)||r(t,e)||Object(i["a"])(t,e)||o()}},"3c11":function(t,e,n){},4160:function(t,e,n){"use strict";var a=n("23e7"),r=n("17c2");a({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"46a8":function(t,e,n){"use strict";n("98b7")},4863:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"page-merge"},[n("div",{staticClass:"page-merge__left"},[n("div",{staticClass:"page-merge__left__content"},[n("canvas",{ref:"canvas",attrs:{width:t.width,height:t.height}})])]),n("div",{staticClass:"page-merge__middle"},[n("ButtonLoadFile",{staticClass:"button-big p-0 a-button a-button--dark a-button-change-background",on:{loaded:t.changeBackground}},[n("i",{staticClass:"ion-md-image"}),t._v(" 背景 ")]),n("ButtonLoadFile",{staticClass:"button-big p-0 a-button a-button--dark a-button--outline",on:{loaded:t.onImageLoaded}},[n("i",{staticClass:"ion-md-folder-open"}),t._v(" 打开 ")]),n("button",{staticClass:"button-big a-button a-button--success a-button-save",on:{click:t.save}},[n("i",{staticClass:"ion-md-cloud-download"}),t._v(" 保存 ")]),n("button",{staticClass:"button-big a-button a-button--danger a-button-save",on:{click:t.clear}},[n("i",{staticClass:"ion-md-cloud-download"}),t._v(" 清空 ")]),n("ul",{staticClass:"mt-2"},t._l(t.imagesUploaded,(function(t){var e=t.src;return n("li",{key:e,staticClass:"img"},[n("img",{attrs:{src:e}})])})),0),n("div",{staticClass:"mt-2"},[n("h1",[t._v("订单信息")]),n("h3",[t._v(t._s(t.$store.state.mergeData.sku))]),n("h3",[t._v(t._s(t.$store.state.mergeData.variant_title))]),n("h3",{staticClass:"text-danger"},[t._v("数量: "+t._s(t.$store.state.mergeData.quantity))])]),0<t.activeBackgroundList.length?n("div",t._l(t.activeBackgroundList,(function(e){return n("span",{key:e.url,staticClass:"ovh d-inline-block mr-1",staticStyle:{border:"2px solid #ddd"},on:{click:function(n){return t.changeBackgroundOnline(e.url)}}},[n("img",{staticClass:"d-block",attrs:{src:e.url,width:"56",height:"200"}}),n("h4",[t._v(t._s(e.fileName))])])})),0):t._e()],1),n("div",{staticClass:"page-merge__right"},[n("div",{staticClass:"form-item"},[n("label",[t._v("订单号"),n("input",{attrs:{type:"text",placeholder:"请输入保存后的订单号"},domProps:{value:t.fileName},on:{input:t.changeFileName}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("背景宽度(W)"),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.width,expression:"width",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"请输入背景宽度"},domProps:{value:t.width},on:{change:function(e){t.width=e.target.value}}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("背景高度(H)"),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.height,expression:"height",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"请输入背景高度"},domProps:{value:t.height},on:{change:function(e){t.height=e.target.value}}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("Y轴偏移"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.offsetY,expression:"offsetY"}],attrs:{type:"number",placeholder:"请输入Y轴偏移"},domProps:{value:t.offsetY},on:{input:function(e){e.target.composing||(t.offsetY=e.target.value)}}})])])])])},r=[],i=(n("99af"),n("7db0"),n("4160"),n("d81d"),n("a9e3"),n("d3b7"),n("159b"),n("ddb0"),n("bf19"),n("3835")),o=n("b85c"),s=(n("96cf"),n("1da1")),c=n("21a6"),u=n("0dec"),l=n("c5fb"),d=n("a094"),f=n("ccce"),h=n("8855"),g=n("554b"),m=120,v={name:"Merge",components:{ButtonLoadFile:d["a"]},data:function(){return{offsetY:400,fileName:"",width:1417,height:5551+m,context:null,backgroundImage:null,imagesUploaded:[],backgroundMap:{},backgroundURLs:["https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/AFS1001-Black.png?v=1605943842"]}},computed:{activeBackgroundList:function(){return this.backgroundMap[this.$store.state.mergeData.sku]||[]}},watch:{width:function(){this.render()},height:function(){this.render()},offsetY:function(){this.render()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getBgMap();case 2:return t.imagesUploaded=[],t.context=t.$refs.canvas.getContext("2d"),n=t.$store.state.mergeData,a=n.fileName,r=n.cropImageURLs,t.fileName=a,e.next=8,Object(l["a"])(1===t.activeBackgroundList.length?t.activeBackgroundList[0].url:"#fff");case 8:t.backgroundImage=e.sent,i=Object(o["a"])(r),e.prev=10,i.s();case 12:if((s=i.n()).done){e.next=21;break}return c=s.value,e.t0=t.imagesUploaded,e.next=17,Object(l["a"])(c);case 17:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e["catch"](10),i.e(e.t2);case 26:return e.prev=26,i.f(),e.finish(26);case 29:t.render();case 30:case"end":return e.stop()}}),e,null,[[10,23,26,29]])})))()},methods:{getBgMap:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,n=new u["a"].Query("BackgroundImageMap"),e.next=4,n.find();case 4:a=e.sent,r=a.map((function(t){return t.toJSON()})),r.forEach((function(e){var n=e.sku,a=e.fileName,r=e.url;void 0===t.backgroundMap[n]&&t.$set(t.backgroundMap,n,[]),t.backgroundMap[n].push({fileName:a,url:r})})),t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},changeFileName:function(t){this.fileName=t.target.value,this.render()},addText:function(t){this.context.save(),this.context.fillStyle="#fff",this.context.fillRect(0,0,this.width,m),this.context.textAlign="right",this.context.translate(this.width/2,0),this.context.scale(-1,1),this.context.font="100px Georgia",this.context.fillStyle="#000",this.context.fillText(t,this.width/2,90),this.context.restore()},save:function(){var t=this;this.$refs.canvas.toBlob((function(e){Object(g["changeDpiBlob"])(e,300).then((function(e){var n=t.$store.state.mergeData,a=n.sku,r=n.variant_title;Object(c["saveAs"])(e,"".concat(t.fileName," - [").concat(a,"] - [").concat(r,"].jpg"))}))}),"image/jpeg",1)},changeBackgroundOnline:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.next=3,Object(l["a"])(t);case 3:e.backgroundImage=n.sent,e.render(),e.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},changeBackground:function(t){var e=t[0].source,n=e.img;e.fileName;this.backgroundImage=n,this.render()},onImageLoaded:function(t){var e,n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value.source;this.fileName=a.fileName;var r=a.img;this.imagesUploaded.push(r)}}catch(i){n.e(i)}finally{n.f()}this.render()},clear:function(){this.imagesUploaded=[],this.render()},render:function(){var t=this.context;if(t.clearRect(0,0,this.width,this.height),this.addText(this.fileName.substring(0,10)),t.drawImage(this.backgroundImage,0,m,this.width,this.height),0<this.imagesUploaded.length){var e,n=this.imagesUploaded.length,a=Object(o["a"])(f["a"].entries());try{for(a.s();!(e=a.n()).done;){var r=Object(i["a"])(e.value,2),s=r[0],c=r[1],u=c.x,l=c.y,d=c.w,g=c.h,v=this.imagesUploaded[s%n],p=Object(h["a"])(v.width,v.height,d,g);t.drawImage(v,0,0,v.width,v.height,u+p.left-d/2,l+p.top+m-g/2+Number(this.offsetY),p.width,p.height)}}catch(b){a.e(b)}finally{a.f()}}}}},p=v,b=(n("858b"),n("2877")),w=Object(b["a"])(p,a,r,!1,null,null,null);e["default"]=w.exports},"554b":function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){for(var t=new Int32Array(256),e=0;e<256;e++){for(var n=e,a=0;a<8;a++)n=1&n?3988292384^n>>>1:n>>>1;t[e]=n}return t}function i(t){var e=-1;o||(o=r());for(var n=0;n<t.length;n++)e=o[255&(e^t[n])]^e>>>8;return-1^e}Object.defineProperty(e,"__esModule",{value:!0}),e.changeDpiBlob=v,e.changeDpiDataUrl=p;var o=void 0,s="image/png",c="image/jpeg",u="AAlwSFlz",l="AAAJcEhZ",d="AAAACXBI",f="p".charCodeAt(0),h="H".charCodeAt(0),g="Y".charCodeAt(0),m="s".charCodeAt(0);function v(t,e){var n=t.slice(0,33);return new Promise((function(a,r){var i=new FileReader;i.onload=function(){var n=new Uint8Array(i.result),r=t.slice(33),o=y(n,e,t.type);a(new Blob([o,r],{type:t.type}))},i.readAsArrayBuffer(n)}))}function p(t,e){var n=t.split(","),r=n[0],i=n[1],o=void 0,u=void 0,l=!1;if(-1!==r.indexOf(s)){o=s;var d=b(i);d>=0?(u=4*Math.ceil((d+28)/3),l=!0):u=44}-1!==r.indexOf(c)&&(o=c,u=24);for(var f=i.substring(0,u),h=i.substring(u),g=atob(f),m=new Uint8Array(g.length),v=0;v<m.length;v++)m[v]=g.charCodeAt(v);var p=y(m,e,o,l),w=btoa(String.fromCharCode.apply(String,a(p)));return[r,",",w,h].join("")}function b(t){var e=t.indexOf(u);return-1===e&&(e=t.indexOf(l)),-1===e&&(e=t.indexOf(d)),e}function w(t){for(var e=t.length-1,n=e;n>=4;n--)if(9===t[n-4]&&t[n-3]===f&&t[n-2]===h&&t[n-1]===g&&t[n]===m)return n-3}function y(t,e,n,a){if(n===c)return t[13]=1,t[14]=e>>8,t[15]=255&e,t[16]=e>>8,t[17]=255&e,t;if(n===s){var r=new Uint8Array(13);e*=39.3701,r[0]=f,r[1]=h,r[2]=g,r[3]=m,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=255&e,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;var o=i(r),u=new Uint8Array(4);if(u[0]=o>>>24,u[1]=o>>>16,u[2]=o>>>8,u[3]=255&o,a){var l=w(t);return t.set(r,l),t.set(u,l+13),t}var d=new Uint8Array(4);d[0]=0,d[1]=0,d[2]=0,d[3]=9;var v=new Uint8Array(54);return v.set(t,0),v.set(d,33),v.set(r,37),v.set(u,50),v}}},8108:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"page-merge"},[n("div",{staticClass:"page-merge__left"},[n("div",{staticClass:"page-merge__left__content"},[n("canvas",{ref:"canvas",attrs:{width:t.width,height:t.height}})])]),n("div",{staticClass:"page-merge__middle"},[n("ButtonLoadFile",{staticClass:"button-big p-0 a-button a-button--dark a-button-change-background",on:{loaded:t.changeBackground}},[n("i",{staticClass:"ion-md-image"}),t._v(" 背景 ")]),n("ButtonLoadFile",{staticClass:"button-big p-0 a-button a-button--dark a-button--outline",on:{loaded:t.onImageLoaded}},[n("i",{staticClass:"ion-md-folder-open"}),t._v(" 打开 ")]),n("button",{staticClass:"button-big a-button a-button--success a-button-save",on:{click:t.save}},[n("i",{staticClass:"ion-md-cloud-download"}),t._v(" 保存 ")]),n("button",{staticClass:"button-big a-button a-button--danger a-button-save",on:{click:t.clear}},[n("i",{staticClass:"ion-md-cloud-download"}),t._v(" 清空 ")]),n("ul",{staticClass:"mt-2"},t._l(t.imagesUploaded,(function(t){var e=t.src;return n("li",{key:e,staticClass:"img"},[n("img",{attrs:{src:e}})])})),0),n("div",{staticClass:"mt-2"},[n("button",{staticClass:"a-button a-button--primary",on:{click:function(e){return t.$router.push({path:"/list"})}}},[t._v("返回")]),n("h1",[t._v("订单信息")]),n("h3",[t._v(t._s(t.$store.state.mergeData.sku))]),n("h3",[t._v(t._s(t.$store.state.mergeData.variant_title))]),n("h2",{staticClass:"text-danger"},[t._v("数量: "+t._s(t.$store.state.mergeData.quantity))])]),0<t.activeBackgroundList.length?n("div",t._l(t.activeBackgroundList,(function(e){return n("span",{key:e.url,staticClass:"ovh d-inline-block mr-1",staticStyle:{border:"2px solid #ddd"},on:{click:function(n){return t.changeBackgroundOnline(e.url)}}},[n("img",{staticClass:"d-block",attrs:{src:e.url,width:"56",height:"200"}}),n("h4",[t._v(t._s(e.fileName))])])})),0):t._e()],1),n("div",{staticClass:"page-merge__right"},[n("div",{staticClass:"form-item"},[n("label",[t._v("订单号"),n("input",{attrs:{type:"text",placeholder:"请输入保存后的订单号"},domProps:{value:t.fileName},on:{input:t.changeFileName}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("背景宽度(W)"),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.width,expression:"width",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"请输入背景宽度"},domProps:{value:t.width},on:{change:function(e){t.width=e.target.value}}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("背景高度(H)"),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.height,expression:"height",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"请输入背景高度"},domProps:{value:t.height},on:{change:function(e){t.height=e.target.value}}})])]),n("div",{staticClass:"form-item"},[n("label",[t._v("Y轴偏移"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.offsetY,expression:"offsetY"}],attrs:{type:"number",placeholder:"请输入Y轴偏移"},domProps:{value:t.offsetY},on:{input:function(e){e.target.composing||(t.offsetY=e.target.value)}}})])])])])},r=[],i=(n("99af"),n("7db0"),n("4160"),n("d81d"),n("a9e3"),n("d3b7"),n("159b"),n("ddb0"),n("bf19"),n("3835")),o=n("b85c"),s=(n("96cf"),n("1da1")),c=n("21a6"),u=n("0dec"),l=n("c5fb"),d=n("a094"),f=n("ccce"),h=n("8855"),g=n("554b"),m=0,v={name:"Merge",components:{ButtonLoadFile:d["a"]},data:function(){return{offsetY:0,fileName:"",width:1417,height:5551+m,context:null,backgroundImage:null,imagesUploaded:[],backgroundMap:{},backgroundURLs:["https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/AFS1001-Black.png?v=1605943842"]}},computed:{activeBackgroundList:function(){return this.backgroundMap[this.$store.state.mergeData.sku]||[]}},watch:{width:function(){this.render()},height:function(){this.render()},offsetY:function(){this.render()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getBgMap();case 2:return t.imagesUploaded=[],t.context=t.$refs.canvas.getContext("2d"),n=t.$store.state.mergeData,a=n.fileName,r=n.cropImageURLs,t.fileName=a,e.next=8,Object(l["a"])(1===t.activeBackgroundList.length?t.activeBackgroundList[0].url:"#fff");case 8:t.backgroundImage=e.sent,i=Object(o["a"])(r),e.prev=10,i.s();case 12:if((s=i.n()).done){e.next=21;break}return c=s.value,e.t0=t.imagesUploaded,e.next=17,Object(l["a"])(c);case 17:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e["catch"](10),i.e(e.t2);case 26:return e.prev=26,i.f(),e.finish(26);case 29:t.render();case 30:case"end":return e.stop()}}),e,null,[[10,23,26,29]])})))()},methods:{getBgMap:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,n=new u["a"].Query("BackgroundImageMap"),e.next=4,n.find();case 4:a=e.sent,r=a.map((function(t){return t.toJSON()})),r.forEach((function(e){var n=e.sku,a=e.fileName,r=e.url;void 0===t.backgroundMap[n]&&t.$set(t.backgroundMap,n,[]),t.backgroundMap[n].push({fileName:a,url:r})})),t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},changeFileName:function(t){this.fileName=t.target.value,this.render()},addText:function(t){this.context.save(),this.context.fillStyle="#fff",this.context.fillRect(0,0,this.width,m),this.context.textAlign="right",this.context.translate(this.width/2,0),this.context.scale(-1,1),this.context.font="100px Georgia",this.context.fillStyle="#000",this.context.fillText(t,this.width/2,90),this.context.restore()},save:function(){var t=this;this.$refs.canvas.toBlob((function(e){Object(g["changeDpiBlob"])(e,300).then((function(e){var n=t.$store.state.mergeData,a=n.sku,r=n.variant_title;Object(c["saveAs"])(e,"".concat(t.fileName," - [").concat(a,"] - [").concat(r,"].jpg"))}))}),"image/jpeg",1)},changeBackgroundOnline:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.next=3,Object(l["a"])(t);case 3:e.backgroundImage=n.sent,e.render(),e.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},changeBackground:function(t){var e=t[0].source,n=e.img;e.fileName;this.backgroundImage=n,this.render()},onImageLoaded:function(t){var e,n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value.source;this.fileName=a.fileName;var r=a.img;this.imagesUploaded.push(r)}}catch(i){n.e(i)}finally{n.f()}this.render()},clear:function(){this.imagesUploaded=[],this.render()},render:function(){var t=this.context;if(t.clearRect(0,0,this.width,this.height),t.drawImage(this.backgroundImage,0,m,this.width,this.height),0<this.imagesUploaded.length){var e,n=this.imagesUploaded.length,a=Object(o["a"])(f["a"].entries());try{for(a.s();!(e=a.n()).done;){var r=Object(i["a"])(e.value,2),s=r[0],c=r[1],u=c.x,l=c.y,d=c.w,g=c.h,v=this.imagesUploaded[s%n],p=Object(h["a"])(v.width,v.height,d,g);t.drawImage(v,0,0,v.width,v.height,u+p.left-d/2,l+p.top+m-g/2+Number(this.offsetY),p.width,p.height)}}catch(b){a.e(b)}finally{a.f()}}}}},p=v,b=(n("ab06"),n("2877")),w=Object(b["a"])(p,a,r,!1,null,null,null);e["default"]=w.exports},"858b":function(t,e,n){"use strict";n("3c11")},8855:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));Date.now;function a(t,e,n,a){if(n/a*e>=t){var r=t*a/e,i=(n-r)/2;return{top:0,left:i,width:r,height:a}}var o=e*n/t,s=(a-o)/2;return{top:s,left:0,height:o,width:n}}},"98b7":function(t,e,n){},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("d039"),i=n("e8b5"),o=n("861d"),s=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),g=f("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",p=h>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),b=d("concat"),w=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:i(t)},y=!p||!b;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,a,r,i,o=s(this),d=l(o,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(i=-1===e?o:arguments[e],w(i)){if(r=c(i.length),f+r>m)throw TypeError(v);for(n=0;n<r;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=m)throw TypeError(v);u(d,f++,i)}return d.length=f,d}})},a094:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"button-load-file"},[n("input",{attrs:{type:"file",accept:"image/*",multiple:""},on:{change:t.onChange}}),t._t("default",[t._v("Upload")])],2)},r=[],i=(n("a630"),n("d81d"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),o={},s=function(t){return new Promise((function(e,n){if(o[t])e(o[t]);else{var a=new Image;a.onload=function(){o[t]=a,e(a)},a.onerror=n,a.src=t}}))},c={name:"ButtonLoadFile",props:{cropSize:{type:Array,default:function(){return[426,269]}}},computed:{cropRate:function(){return this.cropSize[0]/this.cropSize[1]}},data:function(){return{url:""}},methods:{readFile:function(t){var e=this;return new Promise((function(n,a){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var i,o,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s(r.target.result);case 2:i=a.sent,o=i.width,c=i.height,u=e.crop(i),n({source:{fileName:t.name,url:r.target.result,img:i,width:o,height:c},crop:u});case 6:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),r.onerror=a}))},onChange:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.target,r=a.files,o=Array.from(r),!(0<o.length)){n.next=10;break}return n.next=6,Promise.all(o.map(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.readFile(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:s=n.sent,e.$emit("loaded",s),n.next=11;break;case 10:e.$emit("reset");case 11:case"end":return n.stop()}}),n)})))()},crop:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),a=t.width,r=t.height,i=a/r,o=a,s=r,c=0,u=0,l="x";this.cropRate>i?(l="y",s=o/this.cropRate,c=(r-s)/2):(o=s*this.cropRate,u=(a-o)/2),e.width=this.cropSize[0],e.height=this.cropSize[1];var d=[t,u,c,o,s,0,0,this.cropSize[0],this.cropSize[1]];n.drawImage.apply(n,d);var f=e.toDataURL();return{url:f,x:u,y:c,width:o,height:s,cropAxis:l,cropRate:this.cropRate,args:d}}}},u=c,l=(n("46a8"),n("2877")),d=Object(l["a"])(u,a,r,!1,null,null,null);e["a"]=d.exports},a640:function(t,e,n){"use strict";var a=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){throw 1},1)}))}},ab06:function(t,e,n){"use strict";n("b13a")},b13a:function(t,e,n){},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function r(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(c)throw o}}}}},c5fb:function(t,e,n){"use strict";n("d3b7"),n("25f0");var a={};function r(t){return"[object HTMLImageElement]"===Object.prototype.toString.call(t)}function i(t){return new Promise((function(e,n){if(r(t))e(t);else if(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(t)){var o=document.createElement("canvas");o.width=1,o.height=1;var s=o.getContext("2d");s.fillStyle=t,s.fillRect(0,0,1,1),i(o.toDataURL()).then(e)}else{if(a[t])return void e(a[t]);var c=new Image;c.setAttribute("crossOrigin","Anonymous"),c.onload=function(){a[t]=c,e(c)},c.onerror=n,c.src=t}}))}e["a"]=i},ccce:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=[{x:400,y:750,h:560,w:560},{x:980,y:1500,h:560,w:560},{x:400,y:2250,h:560,w:560},{x:980,y:3e3,h:560,w:560},{x:400,y:3750,h:560,w:560},{x:980,y:4500,h:560,w:560}]}}]);
//# sourceMappingURL=Merge.3220fbea.js.map