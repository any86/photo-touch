(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Merge"],{1276:function(e,t,n){"use strict";var r=n("d784"),a=n("44e7"),i=n("825a"),o=n("1d80"),c=n("4840"),u=n("8aa5"),l=n("50c4"),s=n("14c3"),d=n("9263"),f=n("d039"),h=[].push,p=Math.min,b=4294967295,g=!f((function(){return!RegExp(b,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),i=void 0===n?b:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,i);var c,u,l,s=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,g=new RegExp(e.source,f+"g");while(c=d.call(g,r)){if(u=g.lastIndex,u>p&&(s.push(r.slice(p,c.index)),c.length>1&&c.index<r.length&&h.apply(s,c.slice(1)),l=c[0].length,p=u,s.length>=i))break;g.lastIndex===c.index&&g.lastIndex++}return p===r.length?!l&&g.test("")||s.push(""):s.push(r.slice(p)),s.length>i?s.slice(0,i):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var o=n(r,e,this,a,r!==t);if(o.done)return o.value;var d=i(e),f=String(this),h=c(d,RegExp),m=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),w=new h(g?d:"^(?:"+d.source+")",v),x=void 0===a?b:a>>>0;if(0===x)return[];if(0===f.length)return null===s(w,f)?[f]:[];var y=0,j=0,O=[];while(j<f.length){w.lastIndex=g?j:0;var R,E=s(w,g?f:f.slice(j));if(null===E||(R=p(l(w.lastIndex+(g?0:j)),f.length))===y)j=u(f,j,m);else{if(O.push(f.slice(y,j)),O.length===x)return O;for(var k=1;k<=E.length-1;k++)if(O.push(E[k]),O.length===x)return O;j=y=R}}return O.push(f.slice(y)),O}]}),!g)},"14c3":function(e,t,n){var r=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"1e8b":function(e,t,n){"use strict";n("bd0c")},"21a6":function(e,t,n){(function(n){var r,a,i;(function(n,o){a=[],r=o,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){c(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,c=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,n){var c=o.URL||o.webkitURL,u=document.createElement("a");t=t||e.name||"download",u.download=t,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?i(u):a(u.href)?r(e,t,n):i(u,u.target="_blank")):(u.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,o),n);else if(a(e))r(e,n,o);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){i(c)}))}}:function(e,t,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var i="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&c)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var s=o.URL||o.webkitURL,d=s.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){s.revokeObjectURL(d)}),4e4)}});o.saveAs=c.saveAs=c,e.exports=c}))}).call(this,n("c8ba"))},3835:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)if(n.push(o.value),t&&n.length===t)break}catch(u){a=!0,i=u}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw i}}return n}}var i=n("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return r(e)||a(e,t)||Object(i["a"])(e,t)||o()}},"44e7":function(e,t,n){var r=n("861d"),a=n("c6b6"),i=n("b622"),o=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},4863:function(e,t,n){"use strict";n.r(t);var r=n("5c40"),a=n("830f"),i={class:"page-merge"},o={class:"page-merge__left"},c={class:"page-merge__left__content"},u={class:"page-merge__middle"},l=Object(r["j"])("i",{class:"ion-md-cloud-download"},null,-1),s=Object(r["i"])(" 保存 "),d=Object(r["j"])("i",{class:"ion-md-image"},null,-1),f=Object(r["i"])(" 背景 "),h=Object(r["j"])("i",{class:"ion-md-folder-open"},null,-1),p=Object(r["i"])(" 打开 "),b={class:"mt-2"},g={class:"page-merge__right"},m={class:"form-item"},v=Object(r["i"])("文件名"),w={class:"form-item"},x=Object(r["i"])("背景宽度(W)"),y={class:"form-item"},j=Object(r["i"])("背景高度(H)");function O(e,t){var n=Object(r["w"])("ButtonLoadFile");return Object(r["s"])(),Object(r["e"])("article",i,[Object(r["j"])("div",o,[Object(r["j"])("div",c,[Object(r["j"])("canvas",{ref:"canvas",width:e.width,height:e.height},null,8,["width","height"])])]),Object(r["j"])("div",u,[Object(r["j"])("button",{class:"button-big a-button a-button--success a-button-save",onClick:t[1]||(t[1]=function(){return e.save.apply(e,arguments)})},[l,s]),Object(r["j"])(n,{onLoaded:e.changeBackground,class:"button-big p-0 a-button a-button--dark a-button-change-background"},{default:Object(r["C"])((function(){return[d,f]})),_:1},8,["onLoaded"]),Object(r["j"])(n,{onLoaded:e.onImageLoaded,class:"button-big p-0 a-button a-button--dark a-button--outline"},{default:Object(r["C"])((function(){return[h,p]})),_:1},8,["onLoaded"]),Object(r["j"])("ul",b,[(Object(r["s"])(!0),Object(r["e"])(r["b"],null,Object(r["u"])(e.imagesUploaded,(function(e){var t=e.src;return Object(r["s"])(),Object(r["e"])("li",{class:"img",key:t},[Object(r["j"])("img",{src:t},null,8,["src"])])})),128))])]),Object(r["j"])("div",g,[Object(r["j"])("div",m,[Object(r["j"])("label",null,[v,Object(r["D"])(Object(r["j"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.fileName=t}),type:"text",placeholder:"请输入保存后的文件名"},null,512),[[a["b"],e.fileName,void 0,{lazy:!0}]])])]),Object(r["j"])("div",w,[Object(r["j"])("label",null,[x,Object(r["D"])(Object(r["j"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.width=t}),type:"text",placeholder:"请输入背景宽度"},null,512),[[a["b"],e.width,void 0,{lazy:!0}]])])]),Object(r["j"])("div",y,[Object(r["j"])("label",null,[j,Object(r["D"])(Object(r["j"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.height=t}),type:"text",placeholder:"请输入背景高度"},null,512),[[a["b"],e.height,void 0,{lazy:!0}]])])])])])}n("d3b7"),n("ac1f"),n("1276"),n("ddb0");var R=n("3835"),E=n("b85c"),k=(n("96cf"),n("1da1")),I=n("21a6"),S=n("c5fb"),U=n("a094"),L=[{x:472,y:670,h:560,w:560},{x:944,y:1420,h:560,w:560},{x:472,y:2170,h:560,w:560},{x:944,y:2920,h:560,w:560},{x:472,y:3670,h:560,w:560},{x:944,y:4420,h:560,w:560}],A=300,_={name:"Merge",components:{ButtonLoadFile:U["a"]},data:function(){return{fileName:"",width:1417,height:5551+A,context:null,backgroundImage:null,imagesUploaded:[],backgroundURLs:["sock_bg/1.png","https://cdn.shopifycdn.net/s/files/1/0276/2922/4000/files/merchant-taking-sale-with-chip-and-swipe-reader.jpg?v=1593507608"]}},watch:{width:function(){this.render()},height:function(){this.render()},fileName:function(){this.render()}},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.context=e.$refs.canvas.getContext("2d"),t.next=3,Object(S["a"])(e.backgroundURLs[0]);case 3:e.backgroundImage=t.sent,e.context.fillStyle="#fff",e.context.fillRect(0,0,e.width,A),e.context.drawImage(e.backgroundImage,0,A,e.width,e.height);case 7:case"end":return t.stop()}}),t)})))()},methods:{save:function(){var e=this;this.$refs.canvas.toBlob((function(t){Object(I["saveAs"])(t,"".concat(e.fileName,".png"))}),"image/png",1)},changeBackgroundOnline:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(S["a"])(e);case 2:t.backgroundImage=n.sent,t.render();case 4:case"end":return n.stop()}}),n)})))()},changeBackground:function(e){var t=e[0].source,n=t.img;t.fileName;this.backgroundImage=n,this.render()},onImageLoaded:function(e){var t,n=Object(E["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.source,a=r.img,i=r.fileName;this.fileName=i.split(".")[0],this.imagesUploaded.push(a)}}catch(o){n.e(o)}finally{n.f()}this.render()},render:function(e){var t=this.context;if(t.clearRect(0,0,this.width,this.height),t.fillStyle="#fff",t.fillRect(0,0,this.width,A),t.fillStyle="#000",t.font="112px bold 雅黑",t.textBaseline="top",t.fillText(this.fileName,16,A/3),t.drawImage(this.backgroundImage,0,A,this.width,this.height),0<this.imagesUploaded.length){var n,r=this.imagesUploaded.length,a=Object(E["a"])(L.entries());try{for(a.s();!(n=a.n()).done;){var i=Object(R["a"])(n.value,2),o=i[0],c=i[1],u=c.x,l=c.y,s=c.w,d=c.h,f=this.imagesUploaded[o%r],h=Math.max(f.width,f.height);t.drawImage(f,0,0,f.width,f.height,u-s/2,l-d/2+A,s*f.width/h,d*f.height/h)}}catch(p){a.e(p)}finally{a.f()}}}}};n("1e8b");_.render=O;t["default"]=_},6533:function(e,t,n){},"6fd2":function(e,t,n){"use strict";n("6533")},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,c=i,u=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,s=void 0!==/()??/.exec("")[1],d=u||s||l;d&&(c=function(e){var t,n,a,c,d=this,f=l&&d.sticky,h=r.call(d),p=d.source,b=0,g=e;return f&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),g=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,b++),n=new RegExp("^(?:"+p+")",h)),s&&(n=new RegExp("^"+p+"$(?!\\s)",h)),u&&(t=d.lastIndex),a=i.call(f?n:d,g),f?a?(a.input=a.input.slice(b),a[0]=a[0].slice(b),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:u&&a&&(d.lastIndex=d.global?a.index+a[0].length:t),s&&a&&a.length>1&&o.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),e.exports=c},"9f7f":function(e,t,n){"use strict";var r=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a094:function(e,t,n){"use strict";var r=n("5c40"),a={class:"button-load-file"},i=Object(r["i"])("Upload");function o(e,t){return Object(r["s"])(),Object(r["e"])("label",a,[Object(r["j"])("input",{type:"file",accept:"image/*",multiple:"",onChange:t[1]||(t[1]=function(){return e.onChange.apply(e,arguments)})},null,32),Object(r["v"])(e.$slots,"default",{},(function(){return[i]}))])}n("a630"),n("d81d"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf");var c=n("1da1"),u={},l=function(e){return new Promise((function(t,n){if(u[e])t(u[e]);else{var r=new Image;r.onload=function(){u[e]=r,t(r)},r.onerror=n,r.src=e}}))},s={name:"ButtonLoadFile",props:{cropSize:{type:Array,default:function(){return[426,269]}}},computed:{cropRate:function(){return this.cropSize[0]/this.cropSize[1]}},data:function(){return{url:""}},methods:{readFile:function(e){var t=this;return new Promise((function(n,r){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var i,o,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l(a.target.result);case 2:i=r.sent,o=i.width,c=i.height,u=t.crop(i),n({source:{fileName:e.name,url:a.target.result,img:i,width:o,height:c},crop:u});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),a.onerror=r}))},onChange:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.target,a=r.files,i=Array.from(a),!(0<i.length)){n.next=10;break}return n.next=6,Promise.all(i.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.readFile(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=n.sent,t.$emit("loaded",o),n.next=11;break;case 10:t.$emit("reset");case 11:case"end":return n.stop()}}),n)})))()},crop:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width,a=e.height,i=r/a,o=r,c=a,u=0,l=0,s="x";this.cropRate>i?(s="y",c=o/this.cropRate,u=(a-c)/2):(o=c*this.cropRate,l=(r-o)/2),t.width=this.cropSize[0],t.height=this.cropSize[1];var d=[e,l,u,o,c,0,0,this.cropSize[0],this.cropSize[1]];n.drawImage.apply(n,d);var f=t.toDataURL();return{url:f,x:l,y:u,width:o,height:c,cropAxis:s,cropRate:this.cropRate,args:d}}}};n("6fd2");s.render=o;t["a"]=s},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var r=n("06c5");function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){u=!0,o=e},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(u)throw o}}}}},bd0c:function(e,t,n){},c5fb:function(e,t,n){"use strict";n("d3b7"),n("25f0");var r={};function a(e){return"[object HTMLImageElement]"===Object.prototype.toString.call(e)}function i(e){return new Promise((function(t,n){if(a(e))t(e);else if(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(e)){var o=document.createElement("canvas");o.width=1,o.height=1;var c=o.getContext("2d");c.fillStyle=e,c.fillRect(0,0,1,1),i(o.toDataURL()).then(t)}else{if(r[e])return void t(r[e]);var u=new Image;u.setAttribute("crossOrigin","Anonymous"),u.onload=function(){r[e]=u,t(u)},u.onerror=n,u.src=e}}))}t["a"]=i},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),i=n("b622"),o=n("9263"),c=n("9112"),u=i("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),s=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var p=i(e),b=!a((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=b&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!b||!g||"replace"===e&&(!l||!s||f)||"split"===e&&!h){var m=/./[p],v=n(p,""[e],(function(e,t,n,r,a){return t.exec===o?b&&!a?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),w=v[0],x=v[1];r(String.prototype,e,w),r(RegExp.prototype,p,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}d&&c(RegExp.prototype[p],"sham",!0)}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),o=n("ae40"),c=i("map"),u=o("map");r({target:"Array",proto:!0,forced:!c||!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=Merge.d36dd33f.js.map